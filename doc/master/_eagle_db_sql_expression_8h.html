<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>eagle: eagle/eagledb/EagleDbSqlExpression.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_9fb070f42e74af95faa7b0497164f110.html">eagle</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_c73d68629aa9aac03b156a88142949f2.html">eagledb</a>
  </div>
</div>
<div class="contents">
<h1>EagleDbSqlExpression.h File Reference</h1><code>#include &quot;<a class="el" href="_eagle_plan_8h_source.html">EaglePlan.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_eagle_db_sql_expression_header_8h_source.html">EagleDbSqlExpressionHeader.h</a>&quot;</code><br/>

<p><a href="_eagle_db_sql_expression_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dummy type for other expression structures.  <a href="struct_eagle_db_sql_expression.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_eagle_db_sql_expression_8h.html#afbad84baa231a43d079c56ac721bdca6">EagleDbSqlExpression_CompilePlan</a> (<a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> **expressions, int totalExpressions, int whereClause, <a class="el" href="struct_eagle_plan.html">EaglePlan</a> *plan)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compile a plan from one or more expressions.  <a href="#afbad84baa231a43d079c56ac721bdca6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_eagle_db_sql_expression_8h.html#a222a27ce7e45129fd647008b37d8901e">EagleDbSqlExpression_CompilePlanIntoBuffer_</a> (<a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *expression, int *destinationBuffer, <a class="el" href="struct_eagle_plan.html">EaglePlan</a> *plan, <a class="el" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7a">EagleBoolean</a> useProviderForValue)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Recursive function to compile an expression into a plan.  <a href="#a222a27ce7e45129fd647008b37d8901e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_eagle_db_sql_expression_8h.html#ab0df79c3a9699f191cf8a98cc6550b09">EagleDbSqlExpression_CompilePlanIntoBuffer_Binary_</a> (const <a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *expression, int *destinationBuffer, <a class="el" href="struct_eagle_plan.html">EaglePlan</a> *plan)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Private function for <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>.  <a href="#ab0df79c3a9699f191cf8a98cc6550b09"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_eagle_db_sql_expression_8h.html#a8a89c3d5b45b22fde2acbc41c908d13f">EagleDbSqlExpression_CompilePlanIntoBuffer_Cast_</a> (const <a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *expression, int *destinationBuffer, <a class="el" href="struct_eagle_plan.html">EaglePlan</a> *plan)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Private function for <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>.  <a href="#a8a89c3d5b45b22fde2acbc41c908d13f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_eagle_db_sql_expression_8h.html#a7a3026947a0229ff0e76b4087501af2b">EagleDbSqlExpression_CompilePlanIntoBuffer_Function_</a> (<a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *expression, int *destinationBuffer, <a class="el" href="struct_eagle_plan.html">EaglePlan</a> *plan)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Private function for <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>.  <a href="#a7a3026947a0229ff0e76b4087501af2b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_eagle_db_sql_expression_8h.html#aec0297f713c5f399573332478ee8e054">EagleDbSqlExpression_CompilePlanIntoBuffer_Unary_</a> (<a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *expression, int *destinationBuffer, <a class="el" href="struct_eagle_plan.html">EaglePlan</a> *plan)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Private function for <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>.  <a href="#aec0297f713c5f399573332478ee8e054"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_eagle_db_sql_expression_8h.html#a8a015dce68d469ad457141494915de6e">EagleDbSqlExpression_CompilePlanIntoBuffer_Value_</a> (<a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *expression, int *destinationBuffer, <a class="el" href="struct_eagle_plan.html">EaglePlan</a> *plan, <a class="el" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7a">EagleBoolean</a> useProvider)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Private function for <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>.  <a href="#a8a015dce68d469ad457141494915de6e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_eagle_db_sql_expression_8h.html#a762d1a558814f2576ed01c9a32e84647">EagleDbSqlExpression_Delete</a> (<a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *expr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free an expression of any type.  <a href="#a762d1a558814f2576ed01c9a32e84647"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_eagle_db_sql_expression_8h.html#a60ada4a12271bc1d4cbaec239365ef8d">EagleDbSqlExpression_DeleteRecursive</a> (<a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *expr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7a">EagleBoolean</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_eagle_db_sql_expression_8h.html#a8ebfc0fdbcf5b36c71247a19d342366c">EagleDbSqlExpression_isLiteral</a> (const <a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *expression)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_eagle_db_sql_expression_8h.html#a7951dc2d4ddeae124336eb9475ecb266">EagleDbSqlExpression_toString</a> (<a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *expr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Render an expression (of any type) to a string.  <a href="#a7951dc2d4ddeae124336eb9475ecb266"></a><br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_eagle_db_sql_expression_8h.html#a627c801a41393039d8b2cf463c8256f2">EagleDbSqlExpression_ERROR</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return value when the expression can not be compiled.  <a href="#a627c801a41393039d8b2cf463c8256f2"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="afbad84baa231a43d079c56ac721bdca6"></a><!-- doxytag: member="EagleDbSqlExpression.h::EagleDbSqlExpression_CompilePlan" ref="afbad84baa231a43d079c56ac721bdca6" args="(EagleDbSqlExpression **expressions, int totalExpressions, int whereClause, EaglePlan *plan)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EagleDbSqlExpression_CompilePlan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> **&nbsp;</td>
          <td class="paramname"> <em>expressions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>totalExpressions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>whereClause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_eagle_plan.html">EaglePlan</a> *&nbsp;</td>
          <td class="paramname"> <em>plan</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compile a plan from one or more expressions. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>expressions</em>&nbsp;</td><td>An array of expressions. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>totalExpressions</em>&nbsp;</td><td>The total expressions in <code>expressions</code> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>whereClause</em>&nbsp;</td><td>If one of the expressions is the WHERE clause it needs to be highlighted by its index so that data generated by the expression can know which records need to be sent tot he result providers. </td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>plan</em>&nbsp;</td><td>The plan initialized to add the compiled expression into. This is marked as in and out parameter direction because you provide a skeleton plan to be written to, but you cannot provide NULL for this parameter. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_eagle_db_sql_expression_8c_source.html#l00459">459</a> of file <a class="el" href="_eagle_db_sql_expression_8c_source.html">EagleDbSqlExpression.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00460"></a>00460 {
<a name="l00461"></a>00461     <span class="keywordtype">int</span> i, *results, destinationBuffer;
<a name="l00462"></a>00462     
<a name="l00463"></a>00463     <span class="keywordflow">if</span>(NULL == plan) {
<a name="l00464"></a>00464         <span class="keywordflow">return</span>;
<a name="l00465"></a>00465     }
<a name="l00466"></a>00466     
<a name="l00467"></a>00467     <span class="comment">/* for now we will just assume we don&#39;t need more than 20 buffers */</span>
<a name="l00468"></a>00468     <a class="code" href="_eagle_plan_8c.html#abededd553c2315d431978a1602b2c918" title="Prepare the buffers before the expression can be compiled.">EaglePlan_prepareBuffers</a>(plan, 20);
<a name="l00469"></a>00469     
<a name="l00470"></a>00470     <span class="comment">/* make sure we don&#39;t override buffers that are already assigned by providers */</span>
<a name="l00471"></a>00471     destinationBuffer = 0;
<a name="l00472"></a>00472     
<a name="l00473"></a>00473     <a class="code" href="_eagle_linked_list_8h.html#a3a810389ad0cc624dc492e57febee224" title="Iterate through a linked list.">EagleLinkedList_Foreach</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#a187318c3565430d91292e21174716f1f" title="The page providers.">providers</a>, <a class="code" href="struct_eagle_plan_buffer_provider.html" title="This structure acts as a link between a page providers data and the buffer for an...">EaglePlanBufferProvider</a>*, provider)
<a name="l00474"></a>00474     {
<a name="l00475"></a>00475         <span class="keywordflow">if</span>(provider-&gt;destinationBuffer &gt;= destinationBuffer) {
<a name="l00476"></a>00476             destinationBuffer = provider-&gt;destinationBuffer + 1;
<a name="l00477"></a>00477         }
<a name="l00478"></a>00478         
<a name="l00479"></a>00479         <span class="comment">/* each provider will go into a page, sync their types */</span>
<a name="l00480"></a>00480         plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[provider-&gt;destinationBuffer] = provider-&gt;value.provider.provider-&gt;type;
<a name="l00481"></a>00481     }
<a name="l00482"></a>00482     <a class="code" href="_eagle_linked_list_8h.html#a44608d5ba3fc434424fa67e3bacbdd39" title="This MUST always follow a EagleLinkedList_ForeachEnd.">EagleLinkedList_ForeachEnd</a>
<a name="l00483"></a>00483     
<a name="l00484"></a>00484     <span class="comment">/* prepare result providers */</span>
<a name="l00485"></a>00485     plan-&gt;<a class="code" href="struct_eagle_plan.html#afed368b2757680c7fcd64d2ffc079c38" title="The number of providers in result.">resultFields</a> = totalExpressions;
<a name="l00486"></a>00486     plan-&gt;<a class="code" href="struct_eagle_plan.html#a5d79e47d901db222a71b208b098c3d6d" title="Result set after execution.">result</a> = (<a class="code" href="struct_eagle_page_provider.html" title="A page provider.">EaglePageProvider</a>**) <a class="code" href="_eagle_memory_8c.html#ae5491d67ddaa1386224a414a5e944a6a" title="Allocate a single block to support an array.">EagleMemory_MultiAllocate</a>(<span class="stringliteral">&quot;EagleDbSqlExpression_CompilePlan.1&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="struct_eagle_page_provider.html" title="A page provider.">EaglePageProvider</a>*), plan-&gt;<a class="code" href="struct_eagle_plan.html#afed368b2757680c7fcd64d2ffc079c38" title="The number of providers in result.">resultFields</a>);
<a name="l00487"></a>00487     
<a name="l00488"></a>00488     <span class="comment">/* compile expressions */</span>
<a name="l00489"></a>00489     results = (<span class="keywordtype">int</span>*) <a class="code" href="_eagle_memory_8c.html#ae5491d67ddaa1386224a414a5e944a6a" title="Allocate a single block to support an array.">EagleMemory_MultiAllocate</a>(<span class="stringliteral">&quot;EagleDbSqlExpression_CompilePlan.2&quot;</span>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), totalExpressions);
<a name="l00490"></a>00490     <span class="keywordflow">for</span>(i = 0; i &lt; totalExpressions; ++i) {
<a name="l00491"></a>00491         <span class="keywordtype">char</span> *desc;
<a name="l00492"></a>00492         <a class="code" href="struct_eagle_page_provider.html" title="A page provider.">EaglePageProvider</a> *provider;
<a name="l00493"></a>00493         <a class="code" href="_eagle_data_type_8h.html#ac484ab15f125f81b0437f7aed65fbbb2" title="Data types for pages.">EagleDataType</a> dataType;
<a name="l00494"></a>00494         
<a name="l00495"></a>00495         results[i] = <a class="code" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_</a>(expressions[i], &amp;destinationBuffer, plan, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a>);
<a name="l00496"></a>00496         
<a name="l00497"></a>00497         <span class="keywordflow">if</span>(<a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a> == <a class="code" href="_eagle_plan_8c.html#acd76c6215c59c346a4d68bacbc552e3f" title="Check if the plan is currently in an error state.">EaglePlan_isError</a>(plan)) {
<a name="l00498"></a>00498             <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(results);
<a name="l00499"></a>00499             <span class="keywordflow">return</span>;
<a name="l00500"></a>00500         }
<a name="l00501"></a>00501         
<a name="l00502"></a>00502         <span class="comment">/*</span>
<a name="l00503"></a>00503 <span class="comment">         since we don&#39;t know the type of result providers until after we evaluate the expression we can now setup the</span>
<a name="l00504"></a>00504 <span class="comment">         result provider now</span>
<a name="l00505"></a>00505 <span class="comment">         */</span>
<a name="l00506"></a>00506         desc = <a class="code" href="_eagle_db_sql_expression_8c.html#a7951dc2d4ddeae124336eb9475ecb266" title="Render an expression (of any type) to a string.">EagleDbSqlExpression_toString</a>(expressions[i]);
<a name="l00507"></a>00507         dataType = plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[results[i]];
<a name="l00508"></a>00508         provider = (<a class="code" href="struct_eagle_page_provider.html" title="A page provider.">EaglePageProvider</a>*) <a class="code" href="_eagle_page_provider_stream_8c.html#a9e76beb6f24ae6599da01706d0704bff" title="Create a new writable page provider with zero records.">EaglePageProviderStream_New</a>(dataType, plan-&gt;<a class="code" href="struct_eagle_plan.html#a0f8fcbb2d8136c7d33c2e72f3642d6f2" title="The amount of records to read per page.">pageSize</a>, desc);
<a name="l00509"></a>00509         plan-&gt;<a class="code" href="struct_eagle_plan.html#a5d79e47d901db222a71b208b098c3d6d" title="Result set after execution.">result</a>[i] = provider;
<a name="l00510"></a>00510         <a class="code" href="_eagle_plan_8c.html#a43e8e0664ebd4975bab46bc9e2b41c48" title="Extra objects to be freed when this plan instance is removed.">EaglePlan_addFreeObject</a>(plan, provider, (<span class="keywordtype">void</span>(*)(<span class="keywordtype">void</span>*)) <a class="code" href="_eagle_page_provider_8c.html#a28ab9a84c6a2c8cc78757b95d24af9a4" title="Delete a provider.">EaglePageProvider_Delete</a>);
<a name="l00511"></a>00511         <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(desc);
<a name="l00512"></a>00512     }
<a name="l00513"></a>00513     
<a name="l00514"></a>00514     <span class="comment">/* if there is a WHERE clause expression only send those records */</span>
<a name="l00515"></a>00515     <span class="keywordflow">for</span>(i = 0; i &lt; totalExpressions; ++i) {
<a name="l00516"></a>00516         <a class="code" href="struct_eagle_plan_operation.html" title="Represents a plan operation, or a single step in the executation of an expression...">EaglePlanOperation</a> *epo;
<a name="l00517"></a>00517         <span class="keywordtype">char</span> msg[1024];
<a name="l00518"></a>00518         
<a name="l00519"></a>00519         <span class="keywordflow">if</span>(i != whereClause) {
<a name="l00520"></a>00520             <span class="keywordflow">if</span>(whereClause &gt;= 0) {
<a name="l00521"></a>00521                 <span class="comment">/* send some result data to the provider */</span>
<a name="l00522"></a>00522                 <span class="keywordtype">char</span> *t1, *t2, *t3;
<a name="l00523"></a>00523                 
<a name="l00524"></a>00524                 t1 = <a class="code" href="_eagle_data_type_8c.html#a85eab167ee14bb2c94221f627a9879fe" title="Convert a type to a string.">EagleDataType_typeToName</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[results[whereClause]]);
<a name="l00525"></a>00525                 t2 = <a class="code" href="_eagle_data_type_8c.html#a85eab167ee14bb2c94221f627a9879fe" title="Convert a type to a string.">EagleDataType_typeToName</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[results[i]]);
<a name="l00526"></a>00526                 t3 = <a class="code" href="_eagle_data_type_8c.html#a85eab167ee14bb2c94221f627a9879fe" title="Convert a type to a string.">EagleDataType_typeToName</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#a5d79e47d901db222a71b208b098c3d6d" title="Result set after execution.">result</a>[i]-&gt;type);
<a name="l00527"></a>00527                 
<a name="l00528"></a>00528                 sprintf(msg, <span class="stringliteral">&quot;WHERE &lt;%d&gt; (%s), send &lt;%d&gt; (%s) to provider &lt;%d&gt; (%s)&quot;</span>, results[whereClause], t1, results[i], t2, i, t3);
<a name="l00529"></a>00529                 epo = <a class="code" href="_eagle_plan_operation_8c.html#abfad5eeff63360d5c266943b4274d059" title="Create a new plan operation with a page operation.">EaglePlanOperation_NewWithPage</a>(<a class="code" href="_eagle_page_operations_8c.html#a257bbb90faf1843e888f8e5cf18618ed" title="Send records to another provider based on a condition.">EaglePageOperations_SendPageToProvider</a>, -1, results[whereClause], results[i], plan-&gt;<a class="code" href="struct_eagle_plan.html#a5d79e47d901db222a71b208b098c3d6d" title="Result set after execution.">result</a>[i], <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a>, msg);
<a name="l00530"></a>00530                 <a class="code" href="_eagle_plan_8c.html#acfb1391874a38372097316906df0cca1" title="Add an operation to a plan.">EaglePlan_addOperation</a>(plan, epo);
<a name="l00531"></a>00531                 <a class="code" href="_eagle_plan_8c.html#a43e8e0664ebd4975bab46bc9e2b41c48" title="Extra objects to be freed when this plan instance is removed.">EaglePlan_addFreeObject</a>(plan, epo, (<span class="keywordtype">void</span>(*)(<span class="keywordtype">void</span>*)) <a class="code" href="_eagle_plan_operation_8c.html#a61bfef8d9a01cce64ac2b9231554109b" title="Delete an operation.">EaglePlanOperation_Delete</a>);
<a name="l00532"></a>00532                 
<a name="l00533"></a>00533                 <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t1);
<a name="l00534"></a>00534                 <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t2);
<a name="l00535"></a>00535                 <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t3);
<a name="l00536"></a>00536             }
<a name="l00537"></a>00537             <span class="keywordflow">else</span> {
<a name="l00538"></a>00538                 <span class="keywordtype">char</span> *t1, *t2;
<a name="l00539"></a>00539                 
<a name="l00540"></a>00540                 t1 = <a class="code" href="_eagle_data_type_8c.html#a85eab167ee14bb2c94221f627a9879fe" title="Convert a type to a string.">EagleDataType_typeToName</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[results[i]]);
<a name="l00541"></a>00541                 t2 = <a class="code" href="_eagle_data_type_8c.html#a85eab167ee14bb2c94221f627a9879fe" title="Convert a type to a string.">EagleDataType_typeToName</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#a5d79e47d901db222a71b208b098c3d6d" title="Result set after execution.">result</a>[i]-&gt;type);
<a name="l00542"></a>00542                 
<a name="l00543"></a>00543                 <span class="comment">/* send all the result data to the provider */</span>
<a name="l00544"></a>00544                 sprintf(msg, <span class="stringliteral">&quot;ALL &lt;%d&gt; (%s) to provider &lt;%d&gt; (%s)&quot;</span>, results[i], t1, i, t2);
<a name="l00545"></a>00545                 epo = <a class="code" href="_eagle_plan_operation_8c.html#abfad5eeff63360d5c266943b4274d059" title="Create a new plan operation with a page operation.">EaglePlanOperation_NewWithPage</a>(<a class="code" href="_eagle_page_operations_8c.html#a257bbb90faf1843e888f8e5cf18618ed" title="Send records to another provider based on a condition.">EaglePageOperations_SendPageToProvider</a>, -1, -1, results[i], plan-&gt;<a class="code" href="struct_eagle_plan.html#a5d79e47d901db222a71b208b098c3d6d" title="Result set after execution.">result</a>[i], <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a>, msg);
<a name="l00546"></a>00546                 <a class="code" href="_eagle_plan_8c.html#acfb1391874a38372097316906df0cca1" title="Add an operation to a plan.">EaglePlan_addOperation</a>(plan, epo);
<a name="l00547"></a>00547                 <a class="code" href="_eagle_plan_8c.html#a43e8e0664ebd4975bab46bc9e2b41c48" title="Extra objects to be freed when this plan instance is removed.">EaglePlan_addFreeObject</a>(plan, epo, (<span class="keywordtype">void</span>(*)(<span class="keywordtype">void</span>*)) <a class="code" href="_eagle_plan_operation_8c.html#a61bfef8d9a01cce64ac2b9231554109b" title="Delete an operation.">EaglePlanOperation_Delete</a>);
<a name="l00548"></a>00548                 
<a name="l00549"></a>00549                 <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t1);
<a name="l00550"></a>00550                 <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t2);
<a name="l00551"></a>00551             }
<a name="l00552"></a>00552         }
<a name="l00553"></a>00553     }
<a name="l00554"></a>00554     
<a name="l00555"></a>00555     <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(results);
<a name="l00556"></a>00556 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a222a27ce7e45129fd647008b37d8901e"></a><!-- doxytag: member="EagleDbSqlExpression.h::EagleDbSqlExpression_CompilePlanIntoBuffer_" ref="a222a27ce7e45129fd647008b37d8901e" args="(EagleDbSqlExpression *expression, int *destinationBuffer, EaglePlan *plan, EagleBoolean useProviderForValue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int EagleDbSqlExpression_CompilePlanIntoBuffer_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *&nbsp;</td>
          <td class="paramname"> <em>expression</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>destinationBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_eagle_plan.html">EaglePlan</a> *&nbsp;</td>
          <td class="paramname"> <em>plan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7a">EagleBoolean</a>&nbsp;</td>
          <td class="paramname"> <em>useProviderForValue</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Recursive function to compile an expression into a plan. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>expression</em>&nbsp;</td><td>The expression to compile. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>destinationBuffer</em>&nbsp;</td><td>This number is incremented throughout the recursion. When you first call this function the <code>destinationBuffer</code> will be the position of the first buffer allowed to be writen to. You will likely want to set this to 1 so that you keep buffer 0 available. Note that this is not where there final result will be put, it is only the start ID of which buffers can be written to - the function will return an int which is the buffer ID with the real result. You may need to copy that buffer into buffer 0. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>plan</em>&nbsp;</td><td>The plan the operations will be compiled into. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>useProviderForValue</em>&nbsp;</td><td>If this is EagleTrue then a provider will be created for a literal. Otherwise it is assumed the parent will handle the literal. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The buffer ID that contains the real result. </dd></dl>

<p>Definition at line <a class="el" href="_eagle_db_sql_expression_8c_source.html#l00424">424</a> of file <a class="el" href="_eagle_db_sql_expression_8c_source.html">EagleDbSqlExpression.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00428"></a>00428 {
<a name="l00429"></a>00429     <span class="keywordflow">if</span>(NULL == expression) {
<a name="l00430"></a>00430         <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a>;
<a name="l00431"></a>00431     }
<a name="l00432"></a>00432     <span class="keywordflow">if</span>(NULL == plan) {
<a name="l00433"></a>00433         <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a>;
<a name="l00434"></a>00434     }
<a name="l00435"></a>00435     
<a name="l00436"></a>00436     <span class="keywordflow">switch</span>(expression-&gt;expressionType) {
<a name="l00437"></a>00437             
<a name="l00438"></a>00438         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da310fa056bc6f14d824b33508bd9136d8" title="Real type is EagleDbSqlFunctionExpression.">EagleDbSqlExpressionTypeFunctionExpression</a>:
<a name="l00439"></a>00439             <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_expression_8c.html#a7a3026947a0229ff0e76b4087501af2b" title="Private function for EagleDbSqlExpression_CompilePlanIntoBuffer_().">EagleDbSqlExpression_CompilePlanIntoBuffer_Function_</a>(expression, destinationBuffer, plan);
<a name="l00440"></a>00440             
<a name="l00441"></a>00441         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da58e0ae0a34226fa40c86157c63f716e4" title="Real type is EagleDbSqlUnaryExpression.">EagleDbSqlExpressionTypeUnaryExpression</a>:
<a name="l00442"></a>00442             <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_expression_8c.html#aec0297f713c5f399573332478ee8e054" title="Private function for EagleDbSqlExpression_CompilePlanIntoBuffer_().">EagleDbSqlExpression_CompilePlanIntoBuffer_Unary_</a>(expression, destinationBuffer, plan);
<a name="l00443"></a>00443             
<a name="l00444"></a>00444         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da98abd2ce0c8499f27b91b11e62341669" title="Real type is EagleDbSqlBinaryExpression.">EagleDbSqlExpressionTypeBinaryExpression</a>:
<a name="l00445"></a>00445             <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_expression_8c.html#ab0df79c3a9699f191cf8a98cc6550b09" title="Private function for EagleDbSqlExpression_CompilePlanIntoBuffer_().">EagleDbSqlExpression_CompilePlanIntoBuffer_Binary_</a>(expression, destinationBuffer, plan);
<a name="l00446"></a>00446             
<a name="l00447"></a>00447         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da50223901e3ba6904cab8def43831c737" title="Real type is EagleDbSqlValue.">EagleDbSqlExpressionTypeValue</a>:
<a name="l00448"></a>00448             <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_expression_8c.html#a8a015dce68d469ad457141494915de6e" title="Private function for EagleDbSqlExpression_CompilePlanIntoBuffer_().">EagleDbSqlExpression_CompilePlanIntoBuffer_Value_</a>(expression, destinationBuffer, plan, useProviderForValue);
<a name="l00449"></a>00449             
<a name="l00450"></a>00450         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da787621af44dc6c6ad9fcb68dfa4eeb0e" title="Real type is EagleDbSqlCastExpression.">EagleDbSqlExpressionTypeCastExpression</a>:
<a name="l00451"></a>00451             <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_expression_8c.html#a8a89c3d5b45b22fde2acbc41c908d13f" title="Private function for EagleDbSqlExpression_CompilePlanIntoBuffer_().">EagleDbSqlExpression_CompilePlanIntoBuffer_Cast_</a>(expression, destinationBuffer, plan);
<a name="l00452"></a>00452             
<a name="l00453"></a>00453         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7daa848d53060c9cde10aa3b761b63d13bc" title="Real type is EagleDbSqlSelect.">EagleDbSqlExpressionTypeSelect</a>:
<a name="l00454"></a>00454             <span class="keywordflow">return</span> 0;
<a name="l00455"></a>00455             
<a name="l00456"></a>00456     }
<a name="l00457"></a>00457 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab0df79c3a9699f191cf8a98cc6550b09"></a><!-- doxytag: member="EagleDbSqlExpression.h::EagleDbSqlExpression_CompilePlanIntoBuffer_Binary_" ref="ab0df79c3a9699f191cf8a98cc6550b09" args="(const EagleDbSqlExpression *expression, int *destinationBuffer, EaglePlan *plan)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int EagleDbSqlExpression_CompilePlanIntoBuffer_Binary_ </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *&nbsp;</td>
          <td class="paramname"> <em>expression</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>destinationBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_eagle_plan.html">EaglePlan</a> *&nbsp;</td>
          <td class="paramname"> <em>plan</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Private function for <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>expression</em>&nbsp;</td><td>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>destinationBuffer</em>&nbsp;</td><td>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>plan</em>&nbsp;</td><td>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </dd></dl>

<p>Definition at line <a class="el" href="_eagle_db_sql_expression_8c_source.html#l00222">222</a> of file <a class="el" href="_eagle_db_sql_expression_8c_source.html">EagleDbSqlExpression.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00225"></a>00225 {
<a name="l00226"></a>00226     <a class="code" href="struct_eagle_db_sql_binary_expression.html" title="Expression type is EagleDbSqlExpressionTypeBinaryExpression.">EagleDbSqlBinaryExpression</a> *cast = (<a class="code" href="struct_eagle_db_sql_binary_expression.html" title="Expression type is EagleDbSqlExpressionTypeBinaryExpression.">EagleDbSqlBinaryExpression</a>*) expression;
<a name="l00227"></a>00227     <span class="keywordtype">int</span> destination, destinationLeft, destinationRight;
<a name="l00228"></a>00228     <span class="keywordtype">char</span> msg[1024], *t1, *t2, *t3, *op;
<a name="l00229"></a>00229     <a class="code" href="struct_eagle_plan_operation.html" title="Represents a plan operation, or a single step in the executation of an expression...">EaglePlanOperation</a> *epo;
<a name="l00230"></a>00230     <a class="code" href="struct_eagle_db_sql_binary_operator.html" title="Used by EagleDbSqlBinaryExpression_GetOperation() to find the appropriate page operation...">EagleDbSqlBinaryOperator</a> matchOp;
<a name="l00231"></a>00231     <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7a" title="Enum for representing boolean values.">EagleBoolean</a> matchedOp, leftLiteral, rightLiteral;
<a name="l00232"></a>00232     
<a name="l00233"></a>00233     <span class="comment">/* left */</span>
<a name="l00234"></a>00234     destinationLeft = <a class="code" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_</a>(cast-&gt;<a class="code" href="struct_eagle_db_sql_binary_expression.html#a74eef2f22da663e6b6ec0f2f21041c8d" title="The left operand.">left</a>, destinationBuffer, plan, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a>);
<a name="l00235"></a>00235     <span class="keywordflow">if</span>(<a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a> == destinationLeft || <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a> == <a class="code" href="_eagle_plan_8c.html#acd76c6215c59c346a4d68bacbc552e3f" title="Check if the plan is currently in an error state.">EaglePlan_isError</a>(plan)) {
<a name="l00236"></a>00236         <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a>;
<a name="l00237"></a>00237     }
<a name="l00238"></a>00238     
<a name="l00239"></a>00239     <span class="comment">/* right */</span>
<a name="l00240"></a>00240     destinationRight = <a class="code" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_</a>(cast-&gt;<a class="code" href="struct_eagle_db_sql_binary_expression.html#a36b61b0fdd7e949b38737abba2a3fc37" title="The right operand.">right</a>, destinationBuffer, plan, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a>);
<a name="l00241"></a>00241     <span class="keywordflow">if</span>(<a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a> == destinationRight || <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a> == <a class="code" href="_eagle_plan_8c.html#acd76c6215c59c346a4d68bacbc552e3f" title="Check if the plan is currently in an error state.">EaglePlan_isError</a>(plan)) {
<a name="l00242"></a>00242         <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a>;
<a name="l00243"></a>00243     }
<a name="l00244"></a>00244     
<a name="l00245"></a>00245     <span class="comment">/* decide what type of binary expression it is */</span>
<a name="l00246"></a>00246     leftLiteral = <a class="code" href="_eagle_db_sql_expression_8c.html#a8ebfc0fdbcf5b36c71247a19d342366c">EagleDbSqlExpression_isLiteral</a>(cast-&gt;<a class="code" href="struct_eagle_db_sql_binary_expression.html#a74eef2f22da663e6b6ec0f2f21041c8d" title="The left operand.">left</a>);
<a name="l00247"></a>00247     rightLiteral = <a class="code" href="_eagle_db_sql_expression_8c.html#a8ebfc0fdbcf5b36c71247a19d342366c">EagleDbSqlExpression_isLiteral</a>(cast-&gt;<a class="code" href="struct_eagle_db_sql_binary_expression.html#a36b61b0fdd7e949b38737abba2a3fc37" title="The right operand.">right</a>);
<a name="l00248"></a>00248     
<a name="l00249"></a>00249     <span class="keywordflow">if</span>(<a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a> == leftLiteral &amp;&amp; <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a> == rightLiteral) {
<a name="l00250"></a>00250         <span class="comment">/* this is a bit stupid and inefficient, but to handle a binary operation on two literals we create providers</span>
<a name="l00251"></a>00251 <span class="comment">         for each literal and handle it like a page operation. Issue #98 will address this. */</span>
<a name="l00252"></a>00252         
<a name="l00253"></a>00253         <span class="comment">/* notice that we do not check the error status after these because the error status has already been checked</span>
<a name="l00254"></a>00254 <span class="comment">         above */</span>
<a name="l00255"></a>00255         destinationLeft = <a class="code" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_</a>(cast-&gt;<a class="code" href="struct_eagle_db_sql_binary_expression.html#a74eef2f22da663e6b6ec0f2f21041c8d" title="The left operand.">left</a>, destinationBuffer, plan, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a>);
<a name="l00256"></a>00256         destinationRight = <a class="code" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_</a>(cast-&gt;<a class="code" href="struct_eagle_db_sql_binary_expression.html#a36b61b0fdd7e949b38737abba2a3fc37" title="The right operand.">right</a>, destinationBuffer, plan, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a>);
<a name="l00257"></a>00257     }
<a name="l00258"></a>00258     
<a name="l00259"></a>00259     <span class="keywordflow">if</span>(<a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a> == leftLiteral &amp;&amp; <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a> == rightLiteral) {
<a name="l00260"></a>00260         matchedOp = <a class="code" href="_eagle_db_sql_binary_expression_8c.html#af6219fc1f681fee140c19b340eef62c9" title="Find the appropriate operation for an operator.">EagleDbSqlBinaryExpression_GetLeftOperation</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destinationLeft],
<a name="l00261"></a>00261                                                                 cast-&gt;<a class="code" href="struct_eagle_db_sql_binary_expression.html#a43b006326afba0b0b991b2017f96b503" title="The operator between the left and right operands.">op</a>,
<a name="l00262"></a>00262                                                                 &amp;matchOp);
<a name="l00263"></a>00263     }
<a name="l00264"></a>00264     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a> == leftLiteral &amp;&amp; <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a> == rightLiteral) {
<a name="l00265"></a>00265         matchedOp = <a class="code" href="_eagle_db_sql_binary_expression_8c.html#aa4f5dbf8cdce7c381200814505e8e4f0" title="Find the appropriate operation for an operator.">EagleDbSqlBinaryExpression_GetRightOperation</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destinationRight],
<a name="l00266"></a>00266                                                                  cast-&gt;<a class="code" href="struct_eagle_db_sql_binary_expression.html#a43b006326afba0b0b991b2017f96b503" title="The operator between the left and right operands.">op</a>,
<a name="l00267"></a>00267                                                                  &amp;matchOp);
<a name="l00268"></a>00268     }
<a name="l00269"></a>00269     <span class="keywordflow">else</span> {
<a name="l00270"></a>00270         matchedOp = <a class="code" href="_eagle_db_sql_binary_expression_8c.html#ad16262ad459a3c8721d27ead7ebfcbe7" title="Find the appropriate page operation for an operator.">EagleDbSqlBinaryExpression_GetPageOperation</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destinationLeft],
<a name="l00271"></a>00271                                                                 cast-&gt;<a class="code" href="struct_eagle_db_sql_binary_expression.html#a43b006326afba0b0b991b2017f96b503" title="The operator between the left and right operands.">op</a>,
<a name="l00272"></a>00272                                                                 plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destinationRight],
<a name="l00273"></a>00273                                                                 &amp;matchOp);
<a name="l00274"></a>00274     }
<a name="l00275"></a>00275     
<a name="l00276"></a>00276     <span class="comment">/* operator */</span>
<a name="l00277"></a>00277     destination = *destinationBuffer;
<a name="l00278"></a>00278     
<a name="l00279"></a>00279     t1 = <a class="code" href="_eagle_data_type_8c.html#a85eab167ee14bb2c94221f627a9879fe" title="Convert a type to a string.">EagleDataType_typeToName</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destinationLeft]);
<a name="l00280"></a>00280     t2 = <a class="code" href="_eagle_data_type_8c.html#a85eab167ee14bb2c94221f627a9879fe" title="Convert a type to a string.">EagleDataType_typeToName</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destinationRight]);
<a name="l00281"></a>00281     op = <a class="code" href="_eagle_db_sql_binary_expression_operator_8c.html#ac7156d543776e6912fe14e4889938cb0" title="Get the string representation of the operator.">EagleDbSqlBinaryExpressionOperator_toString</a>(cast-&gt;<a class="code" href="struct_eagle_db_sql_binary_expression.html#a43b006326afba0b0b991b2017f96b503" title="The operator between the left and right operands.">op</a>);
<a name="l00282"></a>00282     
<a name="l00283"></a>00283     <span class="keywordflow">if</span>(<a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a> == matchedOp) {
<a name="l00284"></a>00284         <span class="comment">/* operator does not exist */</span>
<a name="l00285"></a>00285         sprintf(msg, <span class="stringliteral">&quot;No such binary operator %s %s %s&quot;</span>, t1, op, t2);
<a name="l00286"></a>00286         <a class="code" href="_eagle_plan_8c.html#a18f01f09903344bcf03c9c22fa73fffa" title="Set the error for the plan.">EaglePlan_setError</a>(plan, <a class="code" href="_eagle_plan_error_8h.html#a0caae9eb4d0a119af359eada34628befaecbad2169080aff3cf3dd9dce11ebe97" title="Unknown column / identifier.">EaglePlanErrorIdentifier</a>, msg);
<a name="l00287"></a>00287         
<a name="l00288"></a>00288         <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t1);
<a name="l00289"></a>00289         <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t2);
<a name="l00290"></a>00290         <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(op);
<a name="l00291"></a>00291         <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a>;
<a name="l00292"></a>00292     }
<a name="l00293"></a>00293     
<a name="l00294"></a>00294     plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destination] = matchOp.<a class="code" href="struct_eagle_db_sql_binary_operator.html#af92db6f6ffc1491f61cfbcd0a2d2a9a7" title="The return type that the page operation function outputs.">returnType</a>;
<a name="l00295"></a>00295     
<a name="l00296"></a>00296     t3 = <a class="code" href="_eagle_data_type_8c.html#a85eab167ee14bb2c94221f627a9879fe" title="Convert a type to a string.">EagleDataType_typeToName</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destination]);
<a name="l00297"></a>00297     
<a name="l00298"></a>00298     <span class="keywordflow">if</span>(<a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a> == leftLiteral &amp;&amp; <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a> == rightLiteral) {
<a name="l00299"></a>00299         sprintf(msg, <span class="stringliteral">&quot;{ &lt;%d&gt; (%s) %s %s } into &lt;%d&gt; (%s)&quot;</span>, destinationLeft, t1, op, t2, destination, t3);
<a name="l00300"></a>00300         epo = <a class="code" href="_eagle_plan_operation_8c.html#a8615581ff92cc11c23cefff18194ce0b" title="Create a new plan operation with a literal.">EaglePlanOperation_NewWithLiteral</a>(matchOp.func, destination, destinationLeft, (<a class="code" href="struct_eagle_db_sql_value.html" title="Encapsulates a Value of any type.">EagleDbSqlValue</a>*) cast-&gt;<a class="code" href="struct_eagle_db_sql_binary_expression.html#a36b61b0fdd7e949b38737abba2a3fc37" title="The right operand.">right</a>, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a>, msg);
<a name="l00301"></a>00301     }
<a name="l00302"></a>00302     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a> == leftLiteral &amp;&amp; <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a> == rightLiteral) {
<a name="l00303"></a>00303         sprintf(msg, <span class="stringliteral">&quot;{ &lt;%d&gt; (%s) %s %s } into &lt;%d&gt; (%s)&quot;</span>, destinationRight, t2, op, t1, destination, t3);
<a name="l00304"></a>00304         epo = <a class="code" href="_eagle_plan_operation_8c.html#a8615581ff92cc11c23cefff18194ce0b" title="Create a new plan operation with a literal.">EaglePlanOperation_NewWithLiteral</a>(matchOp.func, destination, destinationRight, (<a class="code" href="struct_eagle_db_sql_value.html" title="Encapsulates a Value of any type.">EagleDbSqlValue</a>*) cast-&gt;<a class="code" href="struct_eagle_db_sql_binary_expression.html#a74eef2f22da663e6b6ec0f2f21041c8d" title="The left operand.">left</a>, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a>, msg);
<a name="l00305"></a>00305     }
<a name="l00306"></a>00306     <span class="keywordflow">else</span> {
<a name="l00307"></a>00307         sprintf(msg, <span class="stringliteral">&quot;{ &lt;%d&gt; (%s) %s &lt;%d&gt; (%s) } into &lt;%d&gt; (%s)&quot;</span>, destinationLeft, t1, op, destinationRight, t2,
<a name="l00308"></a>00308                 destination, t3);
<a name="l00309"></a>00309         epo = <a class="code" href="_eagle_plan_operation_8c.html#abfad5eeff63360d5c266943b4274d059" title="Create a new plan operation with a page operation.">EaglePlanOperation_NewWithPage</a>(matchOp.func, destination, destinationLeft, destinationRight, NULL, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a>, msg);
<a name="l00310"></a>00310     }
<a name="l00311"></a>00311     
<a name="l00312"></a>00312     <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t1);
<a name="l00313"></a>00313     <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t2);
<a name="l00314"></a>00314     <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t3);
<a name="l00315"></a>00315     <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(op);
<a name="l00316"></a>00316     
<a name="l00317"></a>00317     <a class="code" href="_eagle_plan_8c.html#acfb1391874a38372097316906df0cca1" title="Add an operation to a plan.">EaglePlan_addOperation</a>(plan, epo);
<a name="l00318"></a>00318     <a class="code" href="_eagle_plan_8c.html#a43e8e0664ebd4975bab46bc9e2b41c48" title="Extra objects to be freed when this plan instance is removed.">EaglePlan_addFreeObject</a>(plan, epo, (<span class="keywordtype">void</span>(*)(<span class="keywordtype">void</span>*)) <a class="code" href="_eagle_plan_operation_8c.html#a61bfef8d9a01cce64ac2b9231554109b" title="Delete an operation.">EaglePlanOperation_Delete</a>);
<a name="l00319"></a>00319     ++*destinationBuffer;
<a name="l00320"></a>00320     
<a name="l00321"></a>00321     <span class="keywordflow">return</span> destination;
<a name="l00322"></a>00322 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8a89c3d5b45b22fde2acbc41c908d13f"></a><!-- doxytag: member="EagleDbSqlExpression.h::EagleDbSqlExpression_CompilePlanIntoBuffer_Cast_" ref="a8a89c3d5b45b22fde2acbc41c908d13f" args="(const EagleDbSqlExpression *expression, int *destinationBuffer, EaglePlan *plan)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int EagleDbSqlExpression_CompilePlanIntoBuffer_Cast_ </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *&nbsp;</td>
          <td class="paramname"> <em>expression</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>destinationBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_eagle_plan.html">EaglePlan</a> *&nbsp;</td>
          <td class="paramname"> <em>plan</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Private function for <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>expression</em>&nbsp;</td><td>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>destinationBuffer</em>&nbsp;</td><td>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>plan</em>&nbsp;</td><td>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </dd></dl>

<p>Definition at line <a class="el" href="_eagle_db_sql_expression_8c_source.html#l00132">132</a> of file <a class="el" href="_eagle_db_sql_expression_8c_source.html">EagleDbSqlExpression.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00135"></a>00135 {
<a name="l00136"></a>00136     <a class="code" href="struct_eagle_db_sql_cast_expression.html" title="Expression type is EagleDbSqlExpressionTypeCastExpression.">EagleDbSqlCastExpression</a> *cast = (<a class="code" href="struct_eagle_db_sql_cast_expression.html" title="Expression type is EagleDbSqlExpressionTypeCastExpression.">EagleDbSqlCastExpression</a>*) expression;
<a name="l00137"></a>00137     <span class="keywordtype">int</span> destination, destinationLeft;
<a name="l00138"></a>00138     <span class="keywordtype">char</span> msg[1024], *t1, *t2, *t3;
<a name="l00139"></a>00139     <a class="code" href="struct_eagle_plan_operation.html" title="Represents a plan operation, or a single step in the executation of an expression...">EaglePlanOperation</a> *epo;
<a name="l00140"></a>00140     <a class="code" href="struct_eagle_db_sql_cast_operator.html" title="Used by EagleDbSqlCastExpression_GetOperation() to find the appropriate page operation...">EagleDbSqlCastOperator</a> matchOp;
<a name="l00141"></a>00141     <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7a" title="Enum for representing boolean values.">EagleBoolean</a> matchedOp;
<a name="l00142"></a>00142     
<a name="l00143"></a>00143     <span class="comment">/* left */</span>
<a name="l00144"></a>00144     destinationLeft = <a class="code" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_</a>(cast-&gt;<a class="code" href="struct_eagle_db_sql_cast_expression.html#a1929121f9116e94f8a2b45cee4787686" title="The operand.">expr</a>, destinationBuffer, plan, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a>);
<a name="l00145"></a>00145     <span class="keywordflow">if</span>(<a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a> == destinationLeft || <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a> == <a class="code" href="_eagle_plan_8c.html#acd76c6215c59c346a4d68bacbc552e3f" title="Check if the plan is currently in an error state.">EaglePlan_isError</a>(plan)) {
<a name="l00146"></a>00146         <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a>;
<a name="l00147"></a>00147     }
<a name="l00148"></a>00148     
<a name="l00149"></a>00149     <span class="comment">/* operator */</span>
<a name="l00150"></a>00150     destination = *destinationBuffer;
<a name="l00151"></a>00151     
<a name="l00152"></a>00152     t1 = <a class="code" href="_eagle_data_type_8c.html#a85eab167ee14bb2c94221f627a9879fe" title="Convert a type to a string.">EagleDataType_typeToName</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destinationLeft]);
<a name="l00153"></a>00153     t2 = <a class="code" href="_eagle_data_type_8c.html#a85eab167ee14bb2c94221f627a9879fe" title="Convert a type to a string.">EagleDataType_typeToName</a>(cast-&gt;<a class="code" href="struct_eagle_db_sql_cast_expression.html#aa344b33a041d4ebb99726f5ca2c217be" title="The type to cast to.">castAs</a>);
<a name="l00154"></a>00154     
<a name="l00155"></a>00155     matchedOp = <a class="code" href="_eagle_db_sql_cast_expression_8c.html#a4ab2804e4fbbb0177000c0d8897d6221" title="Find the appropriate page operation for a cast expression.">EagleDbSqlCastExpression_GetOperation</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destinationLeft],
<a name="l00156"></a>00156                                                       cast-&gt;<a class="code" href="struct_eagle_db_sql_cast_expression.html#aa344b33a041d4ebb99726f5ca2c217be" title="The type to cast to.">castAs</a>,
<a name="l00157"></a>00157                                                       &amp;matchOp);
<a name="l00158"></a>00158     <span class="keywordflow">if</span>(<a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a> == matchedOp) {
<a name="l00159"></a>00159         <span class="comment">/* operator does not exist */</span>
<a name="l00160"></a>00160         sprintf(msg, <span class="stringliteral">&quot;Can not cast %s to %s.&quot;</span>, t1, t2);
<a name="l00161"></a>00161         <a class="code" href="_eagle_plan_8c.html#a18f01f09903344bcf03c9c22fa73fffa" title="Set the error for the plan.">EaglePlan_setError</a>(plan, <a class="code" href="_eagle_plan_error_8h.html#a0caae9eb4d0a119af359eada34628befaecbad2169080aff3cf3dd9dce11ebe97" title="Unknown column / identifier.">EaglePlanErrorIdentifier</a>, msg);
<a name="l00162"></a>00162         
<a name="l00163"></a>00163         <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t1);
<a name="l00164"></a>00164         <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t2);
<a name="l00165"></a>00165         <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a>;
<a name="l00166"></a>00166     }
<a name="l00167"></a>00167     
<a name="l00168"></a>00168     plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destination] = matchOp.<a class="code" href="struct_eagle_db_sql_cast_operator.html#a2850dd7a0a45e905b255b747dc5b287a" title="Data type of the right side (second operand).">right</a>;
<a name="l00169"></a>00169     
<a name="l00170"></a>00170     t3 = <a class="code" href="_eagle_data_type_8c.html#a85eab167ee14bb2c94221f627a9879fe" title="Convert a type to a string.">EagleDataType_typeToName</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destination]);
<a name="l00171"></a>00171     
<a name="l00172"></a>00172     sprintf(msg, <span class="stringliteral">&quot;{ CAST &lt;%d&gt; (%s) } into &lt;%d&gt; (%s)&quot;</span>, destinationLeft, t1, destination, t3);
<a name="l00173"></a>00173     
<a name="l00174"></a>00174     <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t1);
<a name="l00175"></a>00175     <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t2);
<a name="l00176"></a>00176     <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t3);
<a name="l00177"></a>00177     
<a name="l00178"></a>00178     epo = <a class="code" href="_eagle_plan_operation_8c.html#abfad5eeff63360d5c266943b4274d059" title="Create a new plan operation with a page operation.">EaglePlanOperation_NewWithPage</a>(matchOp.func, destination, destinationLeft, -1, NULL, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a>, msg);
<a name="l00179"></a>00179     <a class="code" href="_eagle_plan_8c.html#acfb1391874a38372097316906df0cca1" title="Add an operation to a plan.">EaglePlan_addOperation</a>(plan, epo);
<a name="l00180"></a>00180     <a class="code" href="_eagle_plan_8c.html#a43e8e0664ebd4975bab46bc9e2b41c48" title="Extra objects to be freed when this plan instance is removed.">EaglePlan_addFreeObject</a>(plan, epo, (<span class="keywordtype">void</span>(*)(<span class="keywordtype">void</span>*)) <a class="code" href="_eagle_plan_operation_8c.html#a61bfef8d9a01cce64ac2b9231554109b" title="Delete an operation.">EaglePlanOperation_Delete</a>);
<a name="l00181"></a>00181     ++*destinationBuffer;
<a name="l00182"></a>00182     
<a name="l00183"></a>00183     <span class="keywordflow">return</span> destination;
<a name="l00184"></a>00184 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7a3026947a0229ff0e76b4087501af2b"></a><!-- doxytag: member="EagleDbSqlExpression.h::EagleDbSqlExpression_CompilePlanIntoBuffer_Function_" ref="a7a3026947a0229ff0e76b4087501af2b" args="(EagleDbSqlExpression *expression, int *destinationBuffer, EaglePlan *plan)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int EagleDbSqlExpression_CompilePlanIntoBuffer_Function_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *&nbsp;</td>
          <td class="paramname"> <em>expression</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>destinationBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_eagle_plan.html">EaglePlan</a> *&nbsp;</td>
          <td class="paramname"> <em>plan</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Private function for <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>expression</em>&nbsp;</td><td>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>destinationBuffer</em>&nbsp;</td><td>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>plan</em>&nbsp;</td><td>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </dd></dl>

<p>Definition at line <a class="el" href="_eagle_db_sql_expression_8c_source.html#l00023">23</a> of file <a class="el" href="_eagle_db_sql_expression_8c_source.html">EagleDbSqlExpression.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00026"></a>00026 {
<a name="l00027"></a>00027     <a class="code" href="struct_eagle_db_sql_function_expression.html" title="Expression type is EagleDbSqlExpressionTypeFunctionExpression.">EagleDbSqlFunctionExpression</a> *cast = (<a class="code" href="struct_eagle_db_sql_function_expression.html" title="Expression type is EagleDbSqlExpressionTypeFunctionExpression.">EagleDbSqlFunctionExpression</a>*) expression;
<a name="l00028"></a>00028     <span class="keywordtype">int</span> destination, destinationExpr;
<a name="l00029"></a>00029     <a class="code" href="struct_eagle_plan_operation.html" title="Represents a plan operation, or a single step in the executation of an expression...">EaglePlanOperation</a> *epo;
<a name="l00030"></a>00030     <a class="code" href="_eagle_page_operations_8h.html#ac1767814a5191fb263d1d7678ba6917d" title="Function pointer.">EaglePageOperationFunction</a>(pageOperation);
<a name="l00031"></a>00031     <span class="keywordtype">char</span> msg[1024], *t1, *t2;
<a name="l00032"></a>00032     
<a name="l00033"></a>00033     <span class="comment">/* expression */</span>
<a name="l00034"></a>00034     destinationExpr = <a class="code" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_</a>(cast-&gt;<a class="code" href="struct_eagle_db_sql_function_expression.html#a1929121f9116e94f8a2b45cee4787686" title="The first argument.">expr</a>, destinationBuffer, plan, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a>);
<a name="l00035"></a>00035     <span class="keywordflow">if</span>(<a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a> == destinationExpr || <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a> == <a class="code" href="_eagle_plan_8c.html#acd76c6215c59c346a4d68bacbc552e3f" title="Check if the plan is currently in an error state.">EaglePlan_isError</a>(plan)) {
<a name="l00036"></a>00036         <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a>;
<a name="l00037"></a>00037     }
<a name="l00038"></a>00038     
<a name="l00039"></a>00039     destination = *destinationBuffer;
<a name="l00040"></a>00040     
<a name="l00041"></a>00041     <span class="comment">/* find the function */</span>
<a name="l00042"></a>00042     <span class="keywordflow">if</span>(<a class="code" href="_eagle_utils_8c.html#a9610c8b103e98e9c66904234ab43fb8a" title="Compare two strings without case-sensitivity.">EagleUtils_CompareWithoutCase</a>(<span class="stringliteral">&quot;sqrt&quot;</span>, cast-&gt;<a class="code" href="struct_eagle_db_sql_function_expression.html#a5ac083a645d964373f022d03df4849c8" title="The name of the function.">name</a>) &amp;&amp; plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destinationExpr] == <a class="code" href="_eagle_data_type_8h.html#ac484ab15f125f81b0437f7aed65fbbb2ae23dff1ffd05859c8d1d0b291a6d4693" title="FLOAT: 64bit floating point.">EagleDataTypeFloat</a>) {
<a name="l00043"></a>00043         pageOperation = <a class="code" href="_eagle_page_operations_8c.html#a98a63b31f899a86be0b775326d5b5620" title="Calculate square root of a page.">EaglePageOperations_SqrtPageFloat</a>;
<a name="l00044"></a>00044     }
<a name="l00045"></a>00045     <span class="keywordflow">else</span> {
<a name="l00046"></a>00046         <span class="comment">/* function does not exist */</span>
<a name="l00047"></a>00047         t1 = <a class="code" href="_eagle_data_type_8c.html#a85eab167ee14bb2c94221f627a9879fe" title="Convert a type to a string.">EagleDataType_typeToName</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destinationExpr]);
<a name="l00048"></a>00048         sprintf(msg, <span class="stringliteral">&quot;Function %s(%s) does not exist.&quot;</span>, cast-&gt;<a class="code" href="struct_eagle_db_sql_function_expression.html#a5ac083a645d964373f022d03df4849c8" title="The name of the function.">name</a>, t1);
<a name="l00049"></a>00049         <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t1);
<a name="l00050"></a>00050         
<a name="l00051"></a>00051         <a class="code" href="_eagle_plan_8c.html#a18f01f09903344bcf03c9c22fa73fffa" title="Set the error for the plan.">EaglePlan_setError</a>(plan, <a class="code" href="_eagle_plan_error_8h.html#a0caae9eb4d0a119af359eada34628befaecbad2169080aff3cf3dd9dce11ebe97" title="Unknown column / identifier.">EaglePlanErrorIdentifier</a>, msg);
<a name="l00052"></a>00052         <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a>;
<a name="l00053"></a>00053     }
<a name="l00054"></a>00054     
<a name="l00055"></a>00055     plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destination] = <a class="code" href="_eagle_data_type_8h.html#ac484ab15f125f81b0437f7aed65fbbb2ae23dff1ffd05859c8d1d0b291a6d4693" title="FLOAT: 64bit floating point.">EagleDataTypeFloat</a>;
<a name="l00056"></a>00056     
<a name="l00057"></a>00057     t1 = <a class="code" href="_eagle_data_type_8c.html#a85eab167ee14bb2c94221f627a9879fe" title="Convert a type to a string.">EagleDataType_typeToName</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destinationExpr]);
<a name="l00058"></a>00058     t2 = <a class="code" href="_eagle_data_type_8c.html#a85eab167ee14bb2c94221f627a9879fe" title="Convert a type to a string.">EagleDataType_typeToName</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destination]);
<a name="l00059"></a>00059     sprintf(msg, <span class="stringliteral">&quot;{ %s(&lt;%d&gt;) (%s) } into &lt;%d&gt; (%s)&quot;</span>, cast-&gt;<a class="code" href="struct_eagle_db_sql_function_expression.html#a5ac083a645d964373f022d03df4849c8" title="The name of the function.">name</a>, destinationExpr, t1, destination, t2);
<a name="l00060"></a>00060     <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t1);
<a name="l00061"></a>00061     <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t2);
<a name="l00062"></a>00062     
<a name="l00063"></a>00063     epo = <a class="code" href="_eagle_plan_operation_8c.html#abfad5eeff63360d5c266943b4274d059" title="Create a new plan operation with a page operation.">EaglePlanOperation_NewWithPage</a>(pageOperation, destination, destinationExpr, -1, NULL, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a>, msg);
<a name="l00064"></a>00064     <a class="code" href="_eagle_plan_8c.html#acfb1391874a38372097316906df0cca1" title="Add an operation to a plan.">EaglePlan_addOperation</a>(plan, epo);
<a name="l00065"></a>00065     <a class="code" href="_eagle_plan_8c.html#a43e8e0664ebd4975bab46bc9e2b41c48" title="Extra objects to be freed when this plan instance is removed.">EaglePlan_addFreeObject</a>(plan, epo, (<span class="keywordtype">void</span>(*)(<span class="keywordtype">void</span>*)) <a class="code" href="_eagle_plan_operation_8c.html#a61bfef8d9a01cce64ac2b9231554109b" title="Delete an operation.">EaglePlanOperation_Delete</a>);
<a name="l00066"></a>00066     ++*destinationBuffer;
<a name="l00067"></a>00067     
<a name="l00068"></a>00068     <span class="keywordflow">return</span> destination;
<a name="l00069"></a>00069 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aec0297f713c5f399573332478ee8e054"></a><!-- doxytag: member="EagleDbSqlExpression.h::EagleDbSqlExpression_CompilePlanIntoBuffer_Unary_" ref="aec0297f713c5f399573332478ee8e054" args="(EagleDbSqlExpression *expression, int *destinationBuffer, EaglePlan *plan)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int EagleDbSqlExpression_CompilePlanIntoBuffer_Unary_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *&nbsp;</td>
          <td class="paramname"> <em>expression</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>destinationBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_eagle_plan.html">EaglePlan</a> *&nbsp;</td>
          <td class="paramname"> <em>plan</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Private function for <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>expression</em>&nbsp;</td><td>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>destinationBuffer</em>&nbsp;</td><td>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>plan</em>&nbsp;</td><td>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </dd></dl>

<p>Definition at line <a class="el" href="_eagle_db_sql_expression_8c_source.html#l00071">71</a> of file <a class="el" href="_eagle_db_sql_expression_8c_source.html">EagleDbSqlExpression.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00074"></a>00074 {
<a name="l00075"></a>00075     <a class="code" href="struct_eagle_db_sql_unary_expression.html" title="Expression type is EagleDbSqlExpressionTypeUnaryExpression.">EagleDbSqlUnaryExpression</a> *cast = (<a class="code" href="struct_eagle_db_sql_unary_expression.html" title="Expression type is EagleDbSqlExpressionTypeUnaryExpression.">EagleDbSqlUnaryExpression</a>*) expression;
<a name="l00076"></a>00076     <span class="keywordtype">int</span> destination, destinationLeft;
<a name="l00077"></a>00077     <span class="keywordtype">char</span> msg[1024], *t1, *t2, *beforeOp = NULL, *afterOp = NULL;
<a name="l00078"></a>00078     <a class="code" href="struct_eagle_plan_operation.html" title="Represents a plan operation, or a single step in the executation of an expression...">EaglePlanOperation</a> *epo;
<a name="l00079"></a>00079     <a class="code" href="struct_eagle_db_sql_unary_operator.html" title="Used by EagleDbSqlUnaryExpression_GetOperation() to find the appropriate page operation...">EagleDbSqlUnaryOperator</a> matchOp;
<a name="l00080"></a>00080     <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7a" title="Enum for representing boolean values.">EagleBoolean</a> matchedOp;
<a name="l00081"></a>00081     
<a name="l00082"></a>00082     <span class="comment">/* operand */</span>
<a name="l00083"></a>00083     destinationLeft = <a class="code" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_</a>(cast-&gt;<a class="code" href="struct_eagle_db_sql_unary_expression.html#a1929121f9116e94f8a2b45cee4787686" title="The operand.">expr</a>, destinationBuffer, plan, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a>);
<a name="l00084"></a>00084     <span class="keywordflow">if</span>(<a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a> == destinationLeft || <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a> == <a class="code" href="_eagle_plan_8c.html#acd76c6215c59c346a4d68bacbc552e3f" title="Check if the plan is currently in an error state.">EaglePlan_isError</a>(plan)) {
<a name="l00085"></a>00085         <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a>;
<a name="l00086"></a>00086     }
<a name="l00087"></a>00087     
<a name="l00088"></a>00088     <span class="comment">/* catch grouping operator */</span>
<a name="l00089"></a>00089     <span class="keywordflow">if</span>(<a class="code" href="_eagle_db_sql_unary_expression_operator_8h.html#a8d984ea85eca693c86972ff18ef55fd8a8a785cf89a97759ab64c492f2bdddb6b" title="Grouping () operator.">EagleDbSqlUnaryExpressionOperatorGrouping</a> == cast-&gt;<a class="code" href="struct_eagle_db_sql_unary_expression.html#a0bb91c4e7ee869591aa0b6d4810d5102" title="The operator.">op</a>) {
<a name="l00090"></a>00090         <span class="keywordflow">return</span> destinationLeft;
<a name="l00091"></a>00091     }
<a name="l00092"></a>00092     
<a name="l00093"></a>00093     <span class="comment">/* operator */</span>
<a name="l00094"></a>00094     destination = *destinationBuffer;
<a name="l00095"></a>00095     
<a name="l00096"></a>00096     t1 = <a class="code" href="_eagle_data_type_8c.html#a85eab167ee14bb2c94221f627a9879fe" title="Convert a type to a string.">EagleDataType_typeToName</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destinationLeft]);
<a name="l00097"></a>00097     <a class="code" href="_eagle_db_sql_unary_expression_operator_8c.html#a390cc12eaab31062ade807bef76b6395" title="Get the string representation of the operator.">EagleDbSqlUnaryExpressionOperator_toString</a>(cast-&gt;<a class="code" href="struct_eagle_db_sql_unary_expression.html#a0bb91c4e7ee869591aa0b6d4810d5102" title="The operator.">op</a>, &amp;beforeOp, &amp;afterOp);
<a name="l00098"></a>00098     
<a name="l00099"></a>00099     matchedOp = <a class="code" href="_eagle_db_sql_unary_expression_8c.html#a6307a0a99f32f028bc53dc53799e81d2" title="Find the appropriate page operation for an operator.">EagleDbSqlUnaryExpression_GetOperation</a>(cast-&gt;<a class="code" href="struct_eagle_db_sql_unary_expression.html#a0bb91c4e7ee869591aa0b6d4810d5102" title="The operator.">op</a>,
<a name="l00100"></a>00100                                                        plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destinationLeft],
<a name="l00101"></a>00101                                                        &amp;matchOp);
<a name="l00102"></a>00102     <span class="keywordflow">if</span>(<a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a> == matchedOp) {
<a name="l00103"></a>00103         <span class="comment">/* operator does not exist */</span>
<a name="l00104"></a>00104         sprintf(msg, <span class="stringliteral">&quot;No such unary operator %s%s%s&quot;</span>, beforeOp, t1, afterOp);
<a name="l00105"></a>00105         <a class="code" href="_eagle_plan_8c.html#a18f01f09903344bcf03c9c22fa73fffa" title="Set the error for the plan.">EaglePlan_setError</a>(plan, <a class="code" href="_eagle_plan_error_8h.html#a0caae9eb4d0a119af359eada34628befaecbad2169080aff3cf3dd9dce11ebe97" title="Unknown column / identifier.">EaglePlanErrorIdentifier</a>, msg);
<a name="l00106"></a>00106         
<a name="l00107"></a>00107         <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t1);
<a name="l00108"></a>00108         <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(beforeOp);
<a name="l00109"></a>00109         <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(afterOp);
<a name="l00110"></a>00110         <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a>;
<a name="l00111"></a>00111     }
<a name="l00112"></a>00112     
<a name="l00113"></a>00113     plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destination] = <a class="code" href="_eagle_data_type_8h.html#ac484ab15f125f81b0437f7aed65fbbb2a036473b82a3370995203efc068bfd977" title="INT or INTEGER: 32bit integer.">EagleDataTypeInteger</a>;
<a name="l00114"></a>00114     
<a name="l00115"></a>00115     t2 = <a class="code" href="_eagle_data_type_8c.html#a85eab167ee14bb2c94221f627a9879fe" title="Convert a type to a string.">EagleDataType_typeToName</a>(plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destination]);
<a name="l00116"></a>00116     
<a name="l00117"></a>00117     sprintf(msg, <span class="stringliteral">&quot;{ %s&lt;%d&gt;%s (%s) } into &lt;%d&gt; (%s)&quot;</span>, beforeOp, destinationLeft, afterOp, t2, destination, t2);
<a name="l00118"></a>00118     
<a name="l00119"></a>00119     <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t1);
<a name="l00120"></a>00120     <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(t2);
<a name="l00121"></a>00121     <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(beforeOp);
<a name="l00122"></a>00122     <a class="code" href="_eagle_memory_8c.html#aaa3b2daf6c57f2aa57de0ade732caeb5" title="Free a pointer.">EagleMemory_Free</a>(afterOp);
<a name="l00123"></a>00123     
<a name="l00124"></a>00124     epo = <a class="code" href="_eagle_plan_operation_8c.html#abfad5eeff63360d5c266943b4274d059" title="Create a new plan operation with a page operation.">EaglePlanOperation_NewWithPage</a>(matchOp.func, destination, destinationLeft, -1, NULL, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a>, msg);
<a name="l00125"></a>00125     <a class="code" href="_eagle_plan_8c.html#acfb1391874a38372097316906df0cca1" title="Add an operation to a plan.">EaglePlan_addOperation</a>(plan, epo);
<a name="l00126"></a>00126     <a class="code" href="_eagle_plan_8c.html#a43e8e0664ebd4975bab46bc9e2b41c48" title="Extra objects to be freed when this plan instance is removed.">EaglePlan_addFreeObject</a>(plan, epo, (<span class="keywordtype">void</span>(*)(<span class="keywordtype">void</span>*)) <a class="code" href="_eagle_plan_operation_8c.html#a61bfef8d9a01cce64ac2b9231554109b" title="Delete an operation.">EaglePlanOperation_Delete</a>);
<a name="l00127"></a>00127     ++*destinationBuffer;
<a name="l00128"></a>00128     
<a name="l00129"></a>00129     <span class="keywordflow">return</span> destination;
<a name="l00130"></a>00130 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8a015dce68d469ad457141494915de6e"></a><!-- doxytag: member="EagleDbSqlExpression.h::EagleDbSqlExpression_CompilePlanIntoBuffer_Value_" ref="a8a015dce68d469ad457141494915de6e" args="(EagleDbSqlExpression *expression, int *destinationBuffer, EaglePlan *plan, EagleBoolean useProvider)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int EagleDbSqlExpression_CompilePlanIntoBuffer_Value_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *&nbsp;</td>
          <td class="paramname"> <em>expression</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>destinationBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_eagle_plan.html">EaglePlan</a> *&nbsp;</td>
          <td class="paramname"> <em>plan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7a">EagleBoolean</a>&nbsp;</td>
          <td class="paramname"> <em>useProvider</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Private function for <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>expression</em>&nbsp;</td><td>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>destinationBuffer</em>&nbsp;</td><td>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>plan</em>&nbsp;</td><td>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>useProvider</em>&nbsp;</td><td>If this is EagleTrue then a provider will be created for the literal. Otherwise it is assumed the parent will handle the literal. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>See <a class="el" href="_eagle_db_sql_expression_8c.html#a222a27ce7e45129fd647008b37d8901e" title="Recursive function to compile an expression into a plan.">EagleDbSqlExpression_CompilePlanIntoBuffer_()</a>. </dd></dl>

<p>Definition at line <a class="el" href="_eagle_db_sql_expression_8c_source.html#l00324">324</a> of file <a class="el" href="_eagle_db_sql_expression_8c_source.html">EagleDbSqlExpression.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00328"></a>00328 {
<a name="l00329"></a>00329     <a class="code" href="struct_eagle_db_sql_value.html" title="Encapsulates a Value of any type.">EagleDbSqlValue</a> *value = (<a class="code" href="struct_eagle_db_sql_value.html" title="Encapsulates a Value of any type.">EagleDbSqlValue</a>*) expression;
<a name="l00330"></a>00330     <span class="keywordtype">int</span> destination;
<a name="l00331"></a>00331     
<a name="l00332"></a>00332     <span class="keywordflow">switch</span>(value-&gt;<a class="code" href="struct_eagle_db_sql_value.html#ad77ce651fe9b80a9eaae740340be2082" title="Value type.">type</a>) {
<a name="l00333"></a>00333             
<a name="l00334"></a>00334         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_value_type_8h.html#a8f57a8843866a9491eebb90fdd9c4d25a45a5b1dc7f1b44c879e18afe76d70c47" title="Use intValue.">EagleDbSqlValueTypeInteger</a>:
<a name="l00335"></a>00335         {
<a name="l00336"></a>00336             <span class="keywordflow">if</span>(<a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a> == useProvider) {
<a name="l00337"></a>00337                 <a class="code" href="struct_eagle_page_provider.html" title="A page provider.">EaglePageProvider</a> *provider;
<a name="l00338"></a>00338                 <a class="code" href="struct_eagle_plan_buffer_provider.html" title="This structure acts as a link between a page providers data and the buffer for an...">EaglePlanBufferProvider</a> *bp;
<a name="l00339"></a>00339                 
<a name="l00340"></a>00340                 destination = *destinationBuffer;
<a name="l00341"></a>00341                 provider = (<a class="code" href="struct_eagle_page_provider.html" title="A page provider.">EaglePageProvider</a>*) <a class="code" href="_eagle_page_provider_single_8c.html#a6e1e036be74444534b0a7184e36400a0" title="This creates a page provider that provides a single page filled with a fixed int...">EaglePageProviderSingle_NewInt</a>(value-&gt;<a class="code" href="struct_eagle_db_sql_value.html#ae0fcdfcb154f1db2626e6df241ccb6ea" title="Contains the actual value, depending on the type.">value</a>.<a class="code" href="struct_eagle_db_sql_value.html#a34aa1b9d94871f740efabef1b6d52b2f" title="Integer.">intValue</a>, plan-&gt;<a class="code" href="struct_eagle_plan.html#a0f8fcbb2d8136c7d33c2e72f3642d6f2" title="The amount of records to read per page.">pageSize</a>, <span class="stringliteral">&quot;(integer literal)&quot;</span>);
<a name="l00342"></a>00342                 bp = <a class="code" href="_eagle_plan_buffer_provider_8c.html#a1dcc9900282ed8df5c5d945c86feed8d" title="Create a new plan buffer provider with a generic provider.">EaglePlanBufferProvider_NewWithProvider</a>(destination, provider, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a>);
<a name="l00343"></a>00343                 <a class="code" href="_eagle_plan_8c.html#ad64ff9ab393377405e4a30043aad16d7" title="Add a buffer provider to a plan.">EaglePlan_addBufferProvider</a>(plan, bp, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a>);
<a name="l00344"></a>00344                 ++*destinationBuffer;
<a name="l00345"></a>00345             }
<a name="l00346"></a>00346             <span class="keywordflow">else</span> {
<a name="l00347"></a>00347                 destination = *destinationBuffer;
<a name="l00348"></a>00348             }
<a name="l00349"></a>00349             
<a name="l00350"></a>00350             plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destination] = <a class="code" href="_eagle_data_type_8h.html#ac484ab15f125f81b0437f7aed65fbbb2a036473b82a3370995203efc068bfd977" title="INT or INTEGER: 32bit integer.">EagleDataTypeInteger</a>;
<a name="l00351"></a>00351             <span class="keywordflow">break</span>;
<a name="l00352"></a>00352         }
<a name="l00353"></a>00353         
<a name="l00354"></a>00354         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_value_type_8h.html#a8f57a8843866a9491eebb90fdd9c4d25a5f0bf7d20910a8563b25447671fe0cfc" title="The name of a column.">EagleDbSqlValueTypeIdentifier</a>:
<a name="l00355"></a>00355         {
<a name="l00356"></a>00356             <span class="comment">/* find the provider for this column */</span>
<a name="l00357"></a>00357             <a class="code" href="struct_eagle_plan_buffer_provider.html" title="This structure acts as a link between a page providers data and the buffer for an...">EaglePlanBufferProvider</a> *provider = <a class="code" href="_eagle_plan_8c.html#aa4a6c0ceb1db756a9dfc1b8f12c3278a" title="Get a buffer provider by name.">EaglePlan_getBufferProviderByName</a>(plan, value-&gt;<a class="code" href="struct_eagle_db_sql_value.html#ae0fcdfcb154f1db2626e6df241ccb6ea" title="Contains the actual value, depending on the type.">value</a>.<a class="code" href="struct_eagle_db_sql_value.html#af5351a0143adaf16c64b881aee01d893" title="When using identifier token.">identifier</a>);
<a name="l00358"></a>00358             <span class="keywordflow">if</span>(NULL == provider) {
<a name="l00359"></a>00359                 <span class="keywordtype">char</span> msg[128];
<a name="l00360"></a>00360                 sprintf(msg, <span class="stringliteral">&quot;Unknown column &#39;%s&#39;&quot;</span>, value-&gt;<a class="code" href="struct_eagle_db_sql_value.html#ae0fcdfcb154f1db2626e6df241ccb6ea" title="Contains the actual value, depending on the type.">value</a>.<a class="code" href="struct_eagle_db_sql_value.html#af5351a0143adaf16c64b881aee01d893" title="When using identifier token.">identifier</a>);
<a name="l00361"></a>00361                 <a class="code" href="_eagle_plan_8c.html#a18f01f09903344bcf03c9c22fa73fffa" title="Set the error for the plan.">EaglePlan_setError</a>(plan, <a class="code" href="_eagle_plan_error_8h.html#a0caae9eb4d0a119af359eada34628befaecbad2169080aff3cf3dd9dce11ebe97" title="Unknown column / identifier.">EaglePlanErrorIdentifier</a>, msg);
<a name="l00362"></a>00362                 <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a>;
<a name="l00363"></a>00363             }
<a name="l00364"></a>00364             
<a name="l00365"></a>00365             plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[provider-&gt;<a class="code" href="struct_eagle_plan_buffer_provider.html#a8523b510ebeb9f430d2f9c8346046c6a" title="The buffer ID where the next page will be loaded into.">destinationBuffer</a>] = provider-&gt;<a class="code" href="struct_eagle_plan_buffer_provider.html#a1de5a120c7d1694b49d18f0bb8ef6398" title="Fixed single value.">value</a>.provider.provider-&gt;<a class="code" href="struct_eagle_db_sql_value.html#ad77ce651fe9b80a9eaae740340be2082" title="Value type.">type</a>;
<a name="l00366"></a>00366             destination = provider-&gt;<a class="code" href="struct_eagle_plan_buffer_provider.html#a8523b510ebeb9f430d2f9c8346046c6a" title="The buffer ID where the next page will be loaded into.">destinationBuffer</a>;
<a name="l00367"></a>00367             <span class="keywordflow">break</span>;
<a name="l00368"></a>00368         }
<a name="l00369"></a>00369             
<a name="l00370"></a>00370         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_value_type_8h.html#a8f57a8843866a9491eebb90fdd9c4d25ab15c25b9291c87cc06e389aeb5b3ceb5" title="Asterisk expression for selecting multiple columns.">EagleDbSqlValueTypeAsterisk</a>:
<a name="l00371"></a>00371         {
<a name="l00372"></a>00372             <span class="keywordtype">char</span> msg[128];
<a name="l00373"></a>00373             sprintf(msg, <span class="stringliteral">&quot;You can not use the star operator like this.&quot;</span>);
<a name="l00374"></a>00374             <a class="code" href="_eagle_plan_8c.html#a18f01f09903344bcf03c9c22fa73fffa" title="Set the error for the plan.">EaglePlan_setError</a>(plan, <a class="code" href="_eagle_plan_error_8h.html#a0caae9eb4d0a119af359eada34628befa7e11846d75d603870839f8f351af4ee5" title="If an expression cannot be compiled (i.e.">EaglePlanErrorCompile</a>, msg);
<a name="l00375"></a>00375             destination = <a class="code" href="_eagle_db_sql_expression_8c.html#a627c801a41393039d8b2cf463c8256f2" title="Return value when the expression can not be compiled.">EagleDbSqlExpression_ERROR</a>;
<a name="l00376"></a>00376             <span class="keywordflow">break</span>;
<a name="l00377"></a>00377         }
<a name="l00378"></a>00378             
<a name="l00379"></a>00379         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_value_type_8h.html#a8f57a8843866a9491eebb90fdd9c4d25ac3cd29c912f78a7ff5c7b0a615735ff3" title="A string literal.">EagleDbSqlValueTypeString</a>:
<a name="l00380"></a>00380         {
<a name="l00381"></a>00381             <span class="keywordflow">if</span>(<a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a> == useProvider) {
<a name="l00382"></a>00382                 <a class="code" href="struct_eagle_page_provider.html" title="A page provider.">EaglePageProvider</a> *provider;
<a name="l00383"></a>00383                 <a class="code" href="struct_eagle_plan_buffer_provider.html" title="This structure acts as a link between a page providers data and the buffer for an...">EaglePlanBufferProvider</a> *bp;
<a name="l00384"></a>00384                 
<a name="l00385"></a>00385                 destination = *destinationBuffer;
<a name="l00386"></a>00386                 provider = (<a class="code" href="struct_eagle_page_provider.html" title="A page provider.">EaglePageProvider</a>*) <a class="code" href="_eagle_page_provider_single_8c.html#ae974e1d4ef699de4f259a8d6d1f6a94c" title="This creates a page provider that provides a single page filled with a fixed string...">EaglePageProviderSingle_NewVarchar</a>(value-&gt;<a class="code" href="struct_eagle_db_sql_value.html#ae0fcdfcb154f1db2626e6df241ccb6ea" title="Contains the actual value, depending on the type.">value</a>.<a class="code" href="struct_eagle_db_sql_value.html#af5351a0143adaf16c64b881aee01d893" title="When using identifier token.">identifier</a>, plan-&gt;<a class="code" href="struct_eagle_plan.html#a0f8fcbb2d8136c7d33c2e72f3642d6f2" title="The amount of records to read per page.">pageSize</a>, <span class="stringliteral">&quot;(string literal)&quot;</span>);
<a name="l00387"></a>00387                 bp = <a class="code" href="_eagle_plan_buffer_provider_8c.html#a1dcc9900282ed8df5c5d945c86feed8d" title="Create a new plan buffer provider with a generic provider.">EaglePlanBufferProvider_NewWithProvider</a>(destination, provider, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a>);
<a name="l00388"></a>00388                 <a class="code" href="_eagle_plan_8c.html#ad64ff9ab393377405e4a30043aad16d7" title="Add a buffer provider to a plan.">EaglePlan_addBufferProvider</a>(plan, bp, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a>);
<a name="l00389"></a>00389                 ++*destinationBuffer;
<a name="l00390"></a>00390             }
<a name="l00391"></a>00391             <span class="keywordflow">else</span> {
<a name="l00392"></a>00392                 destination = *destinationBuffer;
<a name="l00393"></a>00393             }
<a name="l00394"></a>00394             
<a name="l00395"></a>00395             plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destination] = <a class="code" href="_eagle_data_type_8h.html#ac484ab15f125f81b0437f7aed65fbbb2a23c99b1b8cd114dcb4b0c2671767ac86" title="VARCHAR: A NULL terminated string.">EagleDataTypeVarchar</a>;
<a name="l00396"></a>00396             <span class="keywordflow">break</span>;
<a name="l00397"></a>00397         }
<a name="l00398"></a>00398             
<a name="l00399"></a>00399         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_value_type_8h.html#a8f57a8843866a9491eebb90fdd9c4d25a1c2e09ed37350b5fdfa2ec539eb2eb75" title="A floating point number.">EagleDbSqlValueTypeFloat</a>:
<a name="l00400"></a>00400         {
<a name="l00401"></a>00401             <span class="keywordflow">if</span>(<a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a> == useProvider) {
<a name="l00402"></a>00402                 <a class="code" href="struct_eagle_page_provider.html" title="A page provider.">EaglePageProvider</a> *provider;
<a name="l00403"></a>00403                 <a class="code" href="struct_eagle_plan_buffer_provider.html" title="This structure acts as a link between a page providers data and the buffer for an...">EaglePlanBufferProvider</a> *bp;
<a name="l00404"></a>00404                 
<a name="l00405"></a>00405                 destination = *destinationBuffer;
<a name="l00406"></a>00406                 provider = (<a class="code" href="struct_eagle_page_provider.html" title="A page provider.">EaglePageProvider</a>*) <a class="code" href="_eagle_page_provider_single_8c.html#a3fc4d39f13ee4cbc5647402599c854d5" title="This creates a page provider that provides a single page filled with a fixed floating...">EaglePageProviderSingle_NewFloat</a>(value-&gt;<a class="code" href="struct_eagle_db_sql_value.html#ae0fcdfcb154f1db2626e6df241ccb6ea" title="Contains the actual value, depending on the type.">value</a>.<a class="code" href="struct_eagle_db_sql_value.html#a4d566c1fceb610a562ff221cba447f16" title="Floating point number.">floatValue</a>, plan-&gt;<a class="code" href="struct_eagle_plan.html#a0f8fcbb2d8136c7d33c2e72f3642d6f2" title="The amount of records to read per page.">pageSize</a>, <span class="stringliteral">&quot;(float)&quot;</span>);
<a name="l00407"></a>00407                 bp = <a class="code" href="_eagle_plan_buffer_provider_8c.html#a1dcc9900282ed8df5c5d945c86feed8d" title="Create a new plan buffer provider with a generic provider.">EaglePlanBufferProvider_NewWithProvider</a>(destination, provider, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a>);
<a name="l00408"></a>00408                 <a class="code" href="_eagle_plan_8c.html#ad64ff9ab393377405e4a30043aad16d7" title="Add a buffer provider to a plan.">EaglePlan_addBufferProvider</a>(plan, bp, <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a>);
<a name="l00409"></a>00409                 ++*destinationBuffer;
<a name="l00410"></a>00410             }
<a name="l00411"></a>00411             <span class="keywordflow">else</span> {
<a name="l00412"></a>00412                 destination = *destinationBuffer;
<a name="l00413"></a>00413             }
<a name="l00414"></a>00414             
<a name="l00415"></a>00415             plan-&gt;<a class="code" href="struct_eagle_plan.html#aded4db24d0e11cc63687efdda334e3ac" title="The types for each buffer.">bufferTypes</a>[destination] = <a class="code" href="_eagle_data_type_8h.html#ac484ab15f125f81b0437f7aed65fbbb2ae23dff1ffd05859c8d1d0b291a6d4693" title="FLOAT: 64bit floating point.">EagleDataTypeFloat</a>;
<a name="l00416"></a>00416             <span class="keywordflow">break</span>;
<a name="l00417"></a>00417         }
<a name="l00418"></a>00418             
<a name="l00419"></a>00419     }
<a name="l00420"></a>00420     
<a name="l00421"></a>00421     <span class="keywordflow">return</span> destination;
<a name="l00422"></a>00422 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a762d1a558814f2576ed01c9a32e84647"></a><!-- doxytag: member="EagleDbSqlExpression.h::EagleDbSqlExpression_Delete" ref="a762d1a558814f2576ed01c9a32e84647" args="(EagleDbSqlExpression *expr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EagleDbSqlExpression_Delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *&nbsp;</td>
          <td class="paramname"> <em>expr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Free an expression of any type. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>expr</em>&nbsp;</td><td>The instance. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_eagle_db_sql_expression_8c_source.html#l00558">558</a> of file <a class="el" href="_eagle_db_sql_expression_8c_source.html">EagleDbSqlExpression.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00559"></a>00559 {
<a name="l00560"></a>00560     <span class="keywordflow">if</span>(NULL == expr) {
<a name="l00561"></a>00561         <span class="keywordflow">return</span>;
<a name="l00562"></a>00562     }
<a name="l00563"></a>00563     
<a name="l00564"></a>00564     <span class="keywordflow">switch</span>(expr-&gt;expressionType) {
<a name="l00565"></a>00565             
<a name="l00566"></a>00566         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da58e0ae0a34226fa40c86157c63f716e4" title="Real type is EagleDbSqlUnaryExpression.">EagleDbSqlExpressionTypeUnaryExpression</a>:
<a name="l00567"></a>00567             <a class="code" href="_eagle_db_sql_unary_expression_8c.html#a9739bbbf0f9cb8a83613fdaf0f5fb1f3" title="Free a unary expression.">EagleDbSqlUnaryExpression_Delete</a>((<a class="code" href="struct_eagle_db_sql_unary_expression.html" title="Expression type is EagleDbSqlExpressionTypeUnaryExpression.">EagleDbSqlUnaryExpression</a>*) expr);
<a name="l00568"></a>00568             <span class="keywordflow">break</span>;
<a name="l00569"></a>00569             
<a name="l00570"></a>00570         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da98abd2ce0c8499f27b91b11e62341669" title="Real type is EagleDbSqlBinaryExpression.">EagleDbSqlExpressionTypeBinaryExpression</a>:
<a name="l00571"></a>00571             <a class="code" href="_eagle_db_sql_binary_expression_8c.html#a8a4a0a53b4f1b766f97d9d6acffcbb76" title="Free a binary expression.">EagleDbSqlBinaryExpression_Delete</a>((<a class="code" href="struct_eagle_db_sql_binary_expression.html" title="Expression type is EagleDbSqlExpressionTypeBinaryExpression.">EagleDbSqlBinaryExpression</a>*) expr);
<a name="l00572"></a>00572             <span class="keywordflow">break</span>;
<a name="l00573"></a>00573             
<a name="l00574"></a>00574         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7daa848d53060c9cde10aa3b761b63d13bc" title="Real type is EagleDbSqlSelect.">EagleDbSqlExpressionTypeSelect</a>:
<a name="l00575"></a>00575             <a class="code" href="_eagle_db_sql_select_8c.html#a917049359468e1df52062ddb20b6e7e4" title="Free a SELECT object.">EagleDbSqlSelect_Delete</a>((<a class="code" href="struct_eagle_db_sql_select.html" title="SQL SELECT expression.">EagleDbSqlSelect</a>*) expr);
<a name="l00576"></a>00576             <span class="keywordflow">break</span>;
<a name="l00577"></a>00577             
<a name="l00578"></a>00578         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da50223901e3ba6904cab8def43831c737" title="Real type is EagleDbSqlValue.">EagleDbSqlExpressionTypeValue</a>:
<a name="l00579"></a>00579             <a class="code" href="_eagle_db_sql_value_8c.html#ab4d86065ded94598b92cdbbaac2a45a4" title="Free a value.">EagleDbSqlValue_Delete</a>((<a class="code" href="struct_eagle_db_sql_value.html" title="Encapsulates a Value of any type.">EagleDbSqlValue</a>*) expr);
<a name="l00580"></a>00580             <span class="keywordflow">break</span>;
<a name="l00581"></a>00581             
<a name="l00582"></a>00582         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da310fa056bc6f14d824b33508bd9136d8" title="Real type is EagleDbSqlFunctionExpression.">EagleDbSqlExpressionTypeFunctionExpression</a>:
<a name="l00583"></a>00583             <a class="code" href="_eagle_db_sql_function_expression_8c.html#a83c77b09974e4bc04eed00f6642cf47f" title="Free a function expression.">EagleDbSqlFunctionExpression_Delete</a>((<a class="code" href="struct_eagle_db_sql_function_expression.html" title="Expression type is EagleDbSqlExpressionTypeFunctionExpression.">EagleDbSqlFunctionExpression</a>*) expr);
<a name="l00584"></a>00584             <span class="keywordflow">break</span>;
<a name="l00585"></a>00585             
<a name="l00586"></a>00586         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da787621af44dc6c6ad9fcb68dfa4eeb0e" title="Real type is EagleDbSqlCastExpression.">EagleDbSqlExpressionTypeCastExpression</a>:
<a name="l00587"></a>00587             <a class="code" href="_eagle_db_sql_cast_expression_8c.html#a5b36009497b411b980969eeb89cf3771" title="Free a cast expression.">EagleDbSqlCastExpression_Delete</a>((<a class="code" href="struct_eagle_db_sql_cast_expression.html" title="Expression type is EagleDbSqlExpressionTypeCastExpression.">EagleDbSqlCastExpression</a>*) expr);
<a name="l00588"></a>00588             <span class="keywordflow">break</span>;
<a name="l00589"></a>00589             
<a name="l00590"></a>00590     }
<a name="l00591"></a>00591 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a60ada4a12271bc1d4cbaec239365ef8d"></a><!-- doxytag: member="EagleDbSqlExpression.h::EagleDbSqlExpression_DeleteRecursive" ref="a60ada4a12271bc1d4cbaec239365ef8d" args="(EagleDbSqlExpression *expr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EagleDbSqlExpression_DeleteRecursive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *&nbsp;</td>
          <td class="paramname"> <em>expr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_eagle_db_sql_expression_8c_source.html#l00593">593</a> of file <a class="el" href="_eagle_db_sql_expression_8c_source.html">EagleDbSqlExpression.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00594"></a>00594 {
<a name="l00595"></a>00595     <span class="keywordflow">if</span>(NULL == expr) {
<a name="l00596"></a>00596         <span class="keywordflow">return</span>;
<a name="l00597"></a>00597     }
<a name="l00598"></a>00598     
<a name="l00599"></a>00599     <span class="keywordflow">switch</span>(expr-&gt;expressionType) {
<a name="l00600"></a>00600             
<a name="l00601"></a>00601         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da58e0ae0a34226fa40c86157c63f716e4" title="Real type is EagleDbSqlUnaryExpression.">EagleDbSqlExpressionTypeUnaryExpression</a>:
<a name="l00602"></a>00602             <a class="code" href="_eagle_db_sql_unary_expression_8c.html#ab63243675c366a930a38ace17911b6ae" title="Free a unary expression (recursively).">EagleDbSqlUnaryExpression_DeleteRecursive</a>((<a class="code" href="struct_eagle_db_sql_unary_expression.html" title="Expression type is EagleDbSqlExpressionTypeUnaryExpression.">EagleDbSqlUnaryExpression</a>*) expr);
<a name="l00603"></a>00603             <span class="keywordflow">break</span>;
<a name="l00604"></a>00604             
<a name="l00605"></a>00605         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da98abd2ce0c8499f27b91b11e62341669" title="Real type is EagleDbSqlBinaryExpression.">EagleDbSqlExpressionTypeBinaryExpression</a>:
<a name="l00606"></a>00606             <a class="code" href="_eagle_db_sql_binary_expression_8c.html#a4dd46ca294bbe26c4de55f743d5233bf" title="Free a binary expression (recursively).">EagleDbSqlBinaryExpression_DeleteRecursive</a>((<a class="code" href="struct_eagle_db_sql_binary_expression.html" title="Expression type is EagleDbSqlExpressionTypeBinaryExpression.">EagleDbSqlBinaryExpression</a>*) expr);
<a name="l00607"></a>00607             <span class="keywordflow">break</span>;
<a name="l00608"></a>00608             
<a name="l00609"></a>00609         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7daa848d53060c9cde10aa3b761b63d13bc" title="Real type is EagleDbSqlSelect.">EagleDbSqlExpressionTypeSelect</a>:
<a name="l00610"></a>00610             <a class="code" href="_eagle_db_sql_select_8c.html#a1e0f9b008cc505d6178507f493a60e8d" title="Free a SELECT expression (recursively).">EagleDbSqlSelect_DeleteRecursive</a>((<a class="code" href="struct_eagle_db_sql_select.html" title="SQL SELECT expression.">EagleDbSqlSelect</a>*) expr);
<a name="l00611"></a>00611             <span class="keywordflow">break</span>;
<a name="l00612"></a>00612             
<a name="l00613"></a>00613         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da50223901e3ba6904cab8def43831c737" title="Real type is EagleDbSqlValue.">EagleDbSqlExpressionTypeValue</a>:
<a name="l00614"></a>00614             <a class="code" href="_eagle_db_sql_value_8c.html#ab4d86065ded94598b92cdbbaac2a45a4" title="Free a value.">EagleDbSqlValue_Delete</a>((<a class="code" href="struct_eagle_db_sql_value.html" title="Encapsulates a Value of any type.">EagleDbSqlValue</a>*) expr);
<a name="l00615"></a>00615             <span class="keywordflow">break</span>;
<a name="l00616"></a>00616             
<a name="l00617"></a>00617         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da310fa056bc6f14d824b33508bd9136d8" title="Real type is EagleDbSqlFunctionExpression.">EagleDbSqlExpressionTypeFunctionExpression</a>:
<a name="l00618"></a>00618             <a class="code" href="_eagle_db_sql_function_expression_8c.html#ad46775d9ecdee86e127411663f3e19b2" title="Free a function expression (recursively).">EagleDbSqlFunctionExpression_DeleteRecursive</a>((<a class="code" href="struct_eagle_db_sql_function_expression.html" title="Expression type is EagleDbSqlExpressionTypeFunctionExpression.">EagleDbSqlFunctionExpression</a>*) expr);
<a name="l00619"></a>00619             <span class="keywordflow">break</span>;
<a name="l00620"></a>00620             
<a name="l00621"></a>00621         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da787621af44dc6c6ad9fcb68dfa4eeb0e" title="Real type is EagleDbSqlCastExpression.">EagleDbSqlExpressionTypeCastExpression</a>:
<a name="l00622"></a>00622             <a class="code" href="_eagle_db_sql_cast_expression_8c.html#a9a28b39b23dbaaa34867f548abe8eba1" title="Free a cast expression (recursively).">EagleDbSqlCastExpression_DeleteRecursive</a>((<a class="code" href="struct_eagle_db_sql_cast_expression.html" title="Expression type is EagleDbSqlExpressionTypeCastExpression.">EagleDbSqlCastExpression</a>*) expr);
<a name="l00623"></a>00623             <span class="keywordflow">break</span>;
<a name="l00624"></a>00624             
<a name="l00625"></a>00625     }
<a name="l00626"></a>00626 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8ebfc0fdbcf5b36c71247a19d342366c"></a><!-- doxytag: member="EagleDbSqlExpression.h::EagleDbSqlExpression_isLiteral" ref="a8ebfc0fdbcf5b36c71247a19d342366c" args="(const EagleDbSqlExpression *expression)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7a">EagleBoolean</a> EagleDbSqlExpression_isLiteral </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *&nbsp;</td>
          <td class="paramname"> <em>expression</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_eagle_db_sql_expression_8c_source.html#l00186">186</a> of file <a class="el" href="_eagle_db_sql_expression_8c_source.html">EagleDbSqlExpression.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00187"></a>00187 {
<a name="l00188"></a>00188     <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7a" title="Enum for representing boolean values.">EagleBoolean</a> r = <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa5c22bab5fe5699bcf03606cb6905d72c" title="FALSE.">EagleFalse</a>;
<a name="l00189"></a>00189     
<a name="l00190"></a>00190     <span class="keywordflow">switch</span>(expression-&gt;expressionType) {
<a name="l00191"></a>00191             
<a name="l00192"></a>00192         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da50223901e3ba6904cab8def43831c737" title="Real type is EagleDbSqlValue.">EagleDbSqlExpressionTypeValue</a>:
<a name="l00193"></a>00193         {
<a name="l00194"></a>00194             <a class="code" href="struct_eagle_db_sql_value.html" title="Encapsulates a Value of any type.">EagleDbSqlValue</a> *value = (<a class="code" href="struct_eagle_db_sql_value.html" title="Encapsulates a Value of any type.">EagleDbSqlValue</a>*) expression;
<a name="l00195"></a>00195             <span class="keywordflow">switch</span>(value-&gt;<a class="code" href="struct_eagle_db_sql_value.html#ad77ce651fe9b80a9eaae740340be2082" title="Value type.">type</a>) {
<a name="l00196"></a>00196                     
<a name="l00197"></a>00197                 <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_value_type_8h.html#a8f57a8843866a9491eebb90fdd9c4d25ab15c25b9291c87cc06e389aeb5b3ceb5" title="Asterisk expression for selecting multiple columns.">EagleDbSqlValueTypeAsterisk</a>:
<a name="l00198"></a>00198                 <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_value_type_8h.html#a8f57a8843866a9491eebb90fdd9c4d25a5f0bf7d20910a8563b25447671fe0cfc" title="The name of a column.">EagleDbSqlValueTypeIdentifier</a>:
<a name="l00199"></a>00199                     <span class="keywordflow">break</span>;
<a name="l00200"></a>00200                     
<a name="l00201"></a>00201                 <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_value_type_8h.html#a8f57a8843866a9491eebb90fdd9c4d25a1c2e09ed37350b5fdfa2ec539eb2eb75" title="A floating point number.">EagleDbSqlValueTypeFloat</a>:
<a name="l00202"></a>00202                 <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_value_type_8h.html#a8f57a8843866a9491eebb90fdd9c4d25a45a5b1dc7f1b44c879e18afe76d70c47" title="Use intValue.">EagleDbSqlValueTypeInteger</a>:
<a name="l00203"></a>00203                 <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_value_type_8h.html#a8f57a8843866a9491eebb90fdd9c4d25ac3cd29c912f78a7ff5c7b0a615735ff3" title="A string literal.">EagleDbSqlValueTypeString</a>:
<a name="l00204"></a>00204                     r = <a class="code" href="_eagle_boolean_8h.html#aa01305945a9ba427016fd971ed17ec7aa4ac7e7bebceb629a7a2eff6e695504f2" title="TRUE.">EagleTrue</a>;
<a name="l00205"></a>00205                     <span class="keywordflow">break</span>;
<a name="l00206"></a>00206                     
<a name="l00207"></a>00207             }
<a name="l00208"></a>00208         }
<a name="l00209"></a>00209             
<a name="l00210"></a>00210         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da98abd2ce0c8499f27b91b11e62341669" title="Real type is EagleDbSqlBinaryExpression.">EagleDbSqlExpressionTypeBinaryExpression</a>:
<a name="l00211"></a>00211         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da787621af44dc6c6ad9fcb68dfa4eeb0e" title="Real type is EagleDbSqlCastExpression.">EagleDbSqlExpressionTypeCastExpression</a>:
<a name="l00212"></a>00212         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da310fa056bc6f14d824b33508bd9136d8" title="Real type is EagleDbSqlFunctionExpression.">EagleDbSqlExpressionTypeFunctionExpression</a>:
<a name="l00213"></a>00213         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7daa848d53060c9cde10aa3b761b63d13bc" title="Real type is EagleDbSqlSelect.">EagleDbSqlExpressionTypeSelect</a>:
<a name="l00214"></a>00214         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da58e0ae0a34226fa40c86157c63f716e4" title="Real type is EagleDbSqlUnaryExpression.">EagleDbSqlExpressionTypeUnaryExpression</a>:
<a name="l00215"></a>00215             <span class="keywordflow">break</span>;
<a name="l00216"></a>00216             
<a name="l00217"></a>00217     }
<a name="l00218"></a>00218     
<a name="l00219"></a>00219     <span class="keywordflow">return</span> r;
<a name="l00220"></a>00220 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7951dc2d4ddeae124336eb9475ecb266"></a><!-- doxytag: member="EagleDbSqlExpression.h::EagleDbSqlExpression_toString" ref="a7951dc2d4ddeae124336eb9475ecb266" args="(EagleDbSqlExpression *expr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* EagleDbSqlExpression_toString </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_eagle_db_sql_expression.html">EagleDbSqlExpression</a> *&nbsp;</td>
          <td class="paramname"> <em>expr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Render an expression (of any type) to a string. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>expr</em>&nbsp;</td><td>The instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A new string representation of the expression. </dd></dl>

<p>Definition at line <a class="el" href="_eagle_db_sql_expression_8c_source.html#l00628">628</a> of file <a class="el" href="_eagle_db_sql_expression_8c_source.html">EagleDbSqlExpression.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00629"></a>00629 {
<a name="l00630"></a>00630     <span class="keywordflow">if</span>(NULL == expr) {
<a name="l00631"></a>00631         <span class="keywordflow">return</span> strdup(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00632"></a>00632     }
<a name="l00633"></a>00633     
<a name="l00634"></a>00634     <span class="keywordflow">switch</span>(expr-&gt;expressionType) {
<a name="l00635"></a>00635             
<a name="l00636"></a>00636         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da58e0ae0a34226fa40c86157c63f716e4" title="Real type is EagleDbSqlUnaryExpression.">EagleDbSqlExpressionTypeUnaryExpression</a>:
<a name="l00637"></a>00637             <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_unary_expression_8c.html#ae55c7e4e1f9040a5ced2b0b4ea8370bd" title="Render a unary expression into a string.">EagleDbSqlUnaryExpression_toString</a>((<a class="code" href="struct_eagle_db_sql_unary_expression.html" title="Expression type is EagleDbSqlExpressionTypeUnaryExpression.">EagleDbSqlUnaryExpression</a>*) expr);
<a name="l00638"></a>00638             
<a name="l00639"></a>00639         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da98abd2ce0c8499f27b91b11e62341669" title="Real type is EagleDbSqlBinaryExpression.">EagleDbSqlExpressionTypeBinaryExpression</a>:
<a name="l00640"></a>00640             <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_binary_expression_8c.html#a502073a049f81c728068755e1b3b921b" title="Render a binary expression into a string.">EagleDbSqlBinaryExpression_toString</a>((<a class="code" href="struct_eagle_db_sql_binary_expression.html" title="Expression type is EagleDbSqlExpressionTypeBinaryExpression.">EagleDbSqlBinaryExpression</a>*) expr);
<a name="l00641"></a>00641             
<a name="l00642"></a>00642         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7daa848d53060c9cde10aa3b761b63d13bc" title="Real type is EagleDbSqlSelect.">EagleDbSqlExpressionTypeSelect</a>:
<a name="l00643"></a>00643             <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_select_8c.html#a3ea46b5c97bbc64eff9c41373854d458" title="Render the AST into a SELECT statement.">EagleDbSqlSelect_toString</a>((<a class="code" href="struct_eagle_db_sql_select.html" title="SQL SELECT expression.">EagleDbSqlSelect</a>*) expr);
<a name="l00644"></a>00644             
<a name="l00645"></a>00645         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da50223901e3ba6904cab8def43831c737" title="Real type is EagleDbSqlValue.">EagleDbSqlExpressionTypeValue</a>:
<a name="l00646"></a>00646             <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_value_8c.html#a2f5ba7d8500494006d393586940e2046" title="Render a value to a string.">EagleDbSqlValue_toString</a>((<a class="code" href="struct_eagle_db_sql_value.html" title="Encapsulates a Value of any type.">EagleDbSqlValue</a>*) expr);
<a name="l00647"></a>00647             
<a name="l00648"></a>00648         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da310fa056bc6f14d824b33508bd9136d8" title="Real type is EagleDbSqlFunctionExpression.">EagleDbSqlExpressionTypeFunctionExpression</a>:
<a name="l00649"></a>00649             <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_function_expression_8c.html#aa762a77d4761c376e7fea17b6b228248" title="Render a function expression into a string.">EagleDbSqlFunctionExpression_toString</a>((<a class="code" href="struct_eagle_db_sql_function_expression.html" title="Expression type is EagleDbSqlExpressionTypeFunctionExpression.">EagleDbSqlFunctionExpression</a>*) expr);
<a name="l00650"></a>00650             
<a name="l00651"></a>00651         <span class="keywordflow">case</span> <a class="code" href="_eagle_db_sql_expression_type_8h.html#a9f9ea3b12922dfc8fc26e2463ce34f7da787621af44dc6c6ad9fcb68dfa4eeb0e" title="Real type is EagleDbSqlCastExpression.">EagleDbSqlExpressionTypeCastExpression</a>:
<a name="l00652"></a>00652             <span class="keywordflow">return</span> <a class="code" href="_eagle_db_sql_cast_expression_8c.html#a348b16df749e335c62509d931f7e18f6" title="Render a cast expression into a string.">EagleDbSqlCastExpression_toString</a>((<a class="code" href="struct_eagle_db_sql_cast_expression.html" title="Expression type is EagleDbSqlExpressionTypeCastExpression.">EagleDbSqlCastExpression</a>*) expr);
<a name="l00653"></a>00653             
<a name="l00654"></a>00654     }
<a name="l00655"></a>00655 }
</pre></div></p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a627c801a41393039d8b2cf463c8256f2"></a><!-- doxytag: member="EagleDbSqlExpression.h::EagleDbSqlExpression_ERROR" ref="a627c801a41393039d8b2cf463c8256f2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="_eagle_db_sql_expression_8h.html#a627c801a41393039d8b2cf463c8256f2">EagleDbSqlExpression_ERROR</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return value when the expression can not be compiled. </p>

<p>Definition at line <a class="el" href="_eagle_db_sql_expression_8h_source.html#l00046">46</a> of file <a class="el" href="_eagle_db_sql_expression_8h_source.html">EagleDbSqlExpression.h</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Sun Jun 2 15:05:59 2013 for eagle by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
